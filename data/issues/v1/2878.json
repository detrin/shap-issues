{
  "url": "https://api.github.com/repos/shap/shap/issues/2878",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/2878/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/2878/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/2878/events",
  "html_url": "https://github.com/shap/shap/issues/2878",
  "id": 1625888129,
  "node_id": "I_kwDOBHDcK85g6RWB",
  "number": 2878,
  "title": "DeprecationWarnings in shap/explainers/_tree.py",
  "user": {
    "login": "maximilianreimer",
    "id": 6999824,
    "node_id": "MDQ6VXNlcjY5OTk4MjQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6999824?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/maximilianreimer",
    "html_url": "https://github.com/maximilianreimer",
    "followers_url": "https://api.github.com/users/maximilianreimer/followers",
    "following_url": "https://api.github.com/users/maximilianreimer/following{/other_user}",
    "gists_url": "https://api.github.com/users/maximilianreimer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/maximilianreimer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/maximilianreimer/subscriptions",
    "organizations_url": "https://api.github.com/users/maximilianreimer/orgs",
    "repos_url": "https://api.github.com/users/maximilianreimer/repos",
    "events_url": "https://api.github.com/users/maximilianreimer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/maximilianreimer/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-03-15T16:44:40Z",
  "updated_at": "2023-06-03T02:06:10Z",
  "closed_at": "2023-06-03T02:06:10Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Firstly, thank you very much for the awesome package! \r\n\r\nWe are using the TreeExplainer and Plotting utilities. Since we update some of our dependency (matplolib, numpy, xgboost) the shap library produces some DeprecationWarings (see the cleaned logs attached). \r\n\r\nOur setup: \r\n* python 3.10\r\n* xgboost  1.7.2\r\n* matplotlib 3.6.2\r\n* numpy 1.22.4\r\n\r\n```\r\n/shap/explainers/_tree.py:1511: DeprecationWarning: `np.int` is a deprecated alias for the builtin `int`. To silence this warning, use `int` by itself. Doing this will not modify any behavior and is safe. When replacing `np.int`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.\r\n  Deprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n    self.leaf_child_cnt.append(np.zeros(self.num_nodes[i], dtype=np.int))\r\n\r\n/shap/explainers/_tree.py:1520: DeprecationWarning: `np.int` is a deprecated alias for the builtin `int`. To silence this warning, use `int` by itself. Doing this will not modify any behavior and is safe. When replacing `np.int`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.\r\n  Deprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n    self.children_default = np.zeros(shape, dtype=np.int)\r\n\r\n /shap/explainers/_tree.py:1521: DeprecationWarning: `np.int` is a deprecated alias for the builtin `int`. To silence this warning, use `int` by itself. Doing this will not modify any behavior and is safe. When replacing `np.int`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.\r\n  Deprecated in NumPy 1.20; for more details and guidance: https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations\r\n    self.features = np.zeros(shape, dtype=np.int)\r\n\r\n /shap/explainers/_tree.py:1375: DeprecationWarning: NPY_ARRAY_UPDATEIFCOPY, NPY_ARRAY_INOUT_ARRAY, and NPY_ARRAY_INOUT_FARRAY are deprecated, use NPY_WRITEBACKIFCOPY, NPY_ARRAY_INOUT_ARRAY2, or NPY_ARRAY_INOUT_FARRAY2 respectively instead, and call PyArray_ResolveWritebackIfCopy before the array is deallocated, i.e. before the last call to Py_DECREF.\r\n    self.max_depth = _cext.compute_expectations(\r\n\r\n/shap/explainers/_tree.py:1375: DeprecationWarning: UPDATEIFCOPY detected in array_dealloc.  Required call to PyArray_ResolveWritebackIfCopy or PyArray_DiscardWritebackIfCopy is missing\r\n    self.max_depth = _cext.compute_expectations(\r\n\r\n/xgboost/core.py:122: UserWarning: ntree_limit is deprecated, use `iteration_range` or model slicing instead.\r\n    warnings.warn(\r\n\r\nshap/plots/_beeswarm.py:340: UserWarning: No data for colormapping provided via 'c'. Parameters 'vmin', 'vmax' will be ignored\r\n    pl.scatter(shaps[nan_mask], pos + ys[nan_mask], color=\"#777777\", vmin=vmin,\r\n\r\n/shap/plots/_beeswarm.py:365: MatplotlibDeprecationWarning: Unable to determine Axes to steal space for Colorbar. Using gca(), but will raise in the future. Either provide the *cax* argument to use as the Axes for the Colorbar, provide the *ax* argument to steal space from it, or add *mappable* to an Axes.\r\n    cb = pl.colorbar(m, ticks=[0, 1], aspect=80)\r\n```\r\n\r\nThank you very much. \r\n\r\n",
  "closed_by": {
    "login": "dsgibbons",
    "id": 82195909,
    "node_id": "MDQ6VXNlcjgyMTk1OTA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/82195909?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dsgibbons",
    "html_url": "https://github.com/dsgibbons",
    "followers_url": "https://api.github.com/users/dsgibbons/followers",
    "following_url": "https://api.github.com/users/dsgibbons/following{/other_user}",
    "gists_url": "https://api.github.com/users/dsgibbons/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dsgibbons/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dsgibbons/subscriptions",
    "organizations_url": "https://api.github.com/users/dsgibbons/orgs",
    "repos_url": "https://api.github.com/users/dsgibbons/repos",
    "events_url": "https://api.github.com/users/dsgibbons/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dsgibbons/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/2878/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/2878/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
