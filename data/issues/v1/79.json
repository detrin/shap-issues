{
  "url": "https://api.github.com/repos/shap/shap/issues/79",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/79/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/79/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/79/events",
  "html_url": "https://github.com/shap/shap/issues/79",
  "id": 321543813,
  "node_id": "MDU6SXNzdWUzMjE1NDM4MTM=",
  "number": 79,
  "title": "Shap values are log-odds when using xgboost with objective='binary:logistic'",
  "user": {
    "login": "Toekan",
    "id": 19475494,
    "node_id": "MDQ6VXNlcjE5NDc1NDk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/19475494?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Toekan",
    "html_url": "https://github.com/Toekan",
    "followers_url": "https://api.github.com/users/Toekan/followers",
    "following_url": "https://api.github.com/users/Toekan/following{/other_user}",
    "gists_url": "https://api.github.com/users/Toekan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Toekan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Toekan/subscriptions",
    "organizations_url": "https://api.github.com/users/Toekan/orgs",
    "repos_url": "https://api.github.com/users/Toekan/repos",
    "events_url": "https://api.github.com/users/Toekan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Toekan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-05-09T12:06:26Z",
  "updated_at": "2018-05-17T14:35:51Z",
  "closed_at": "2018-05-17T14:35:50Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi,\r\n\r\nI'm looking into using shap to present results in projects that use an Xgboost in binary classification. (Very impressive btw, both the package as the publications, thanks for creating this!)\r\n\r\nI would like to have shap values related to risk score/probability outputs, rather than log-odds. As far as I understand from reading here, shap values should be directly related to whatever the outputs of the model are. I thus choose to train XGboost (with the sklearn API) with objective set as 'binary:logistic', which according to xgboost readthedocs creates probabilities as the model output:\r\n```\r\n“binary:logistic” –logistic regression for binary classification, output probability\r\n```\r\nBut the resulting shap values range between about -5 to +5. Any idea why?\r\n\r\nQuick summary of my python code:\r\n\r\n```python\r\nparam = dict(objective='binary:logistic',\r\n            learning_rate=0.3,\r\n            max_depth=6,\r\n            n_estimators=150,\r\n            base_score=0.5, \r\n            silent=0)\r\nmodel = XGBClassifier(**param)\r\nmodel.fit(X_train, y_train)\r\n\r\nshap.TreeExplainer(model).shap_values(X_test)\r\n```\r\n\r\nSorry if I'm doing something wrong related with SKlearn/Xgboost, but I've gone through all the XGboost documentation and didn't find anything clearing up my issue.",
  "closed_by": {
    "login": "slundberg",
    "id": 3740613,
    "node_id": "MDQ6VXNlcjM3NDA2MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3740613?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/slundberg",
    "html_url": "https://github.com/slundberg",
    "followers_url": "https://api.github.com/users/slundberg/followers",
    "following_url": "https://api.github.com/users/slundberg/following{/other_user}",
    "gists_url": "https://api.github.com/users/slundberg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/slundberg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/slundberg/subscriptions",
    "organizations_url": "https://api.github.com/users/slundberg/orgs",
    "repos_url": "https://api.github.com/users/slundberg/repos",
    "events_url": "https://api.github.com/users/slundberg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/slundberg/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/79/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/79/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
