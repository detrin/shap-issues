{
  "url": "https://api.github.com/repos/shap/shap/issues/1034",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/1034/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/1034/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/1034/events",
  "html_url": "https://github.com/shap/shap/issues/1034",
  "id": 561244577,
  "node_id": "MDU6SXNzdWU1NjEyNDQ1Nzc=",
  "number": 1034,
  "title": "On generating a general waterfall_plot for a multi-class classification",
  "user": {
    "login": "ivan-marroquin",
    "id": 28459534,
    "node_id": "MDQ6VXNlcjI4NDU5NTM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/28459534?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ivan-marroquin",
    "html_url": "https://github.com/ivan-marroquin",
    "followers_url": "https://api.github.com/users/ivan-marroquin/followers",
    "following_url": "https://api.github.com/users/ivan-marroquin/following{/other_user}",
    "gists_url": "https://api.github.com/users/ivan-marroquin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ivan-marroquin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ivan-marroquin/subscriptions",
    "organizations_url": "https://api.github.com/users/ivan-marroquin/orgs",
    "repos_url": "https://api.github.com/users/ivan-marroquin/repos",
    "events_url": "https://api.github.com/users/ivan-marroquin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ivan-marroquin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-02-06T20:14:51Z",
  "updated_at": "2020-02-08T22:49:42Z",
  "closed_at": "2020-02-08T22:49:42Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi,\r\n\r\nI am using Python 3.6.5 on a windows machine with Shap version 0.34.0.\r\n\r\nIn the case of a multi-class classification, a way to generate a waterfall_plot is by using this command:\r\n\r\nshap.waterfall_plot(shap_explainer.expected_value[0], shap_values[0][0], features= pd_test_inputs.iloc[0,:], feature_names= feature_names, show= False)\r\n\r\nThe produced display is based on the first row of samples in both \"shap_values\" and \"pd_test_inputs\"\r\n\r\nIf I would like to build a general waterfall_plot that includes all samples in both \"shap_values\" and \"pd_test_inputs\", what command would be the most indicated:\r\n\r\na) shap.waterfall_plot(shap_explainer.expected_value[0], np.sum(shap_values[0], axis= 0), features= np.sum(pd_test_inputs, axis= 0))\r\n\r\nwhich produced the figure named \"waterfall_first_version.png\" in zip file\r\n\r\nb) shap.waterfall_plot(shap_explainer.expected_value[0], np.sum(np.abs(shap_values[0]), axis= 0), features= np.sum(np.abs(pd_test_inputs), axis= 0))\r\n\r\nwhich produced the figure named \"waterfall_second_version.png\" in zip file\r\n\r\nAlso, I have this suggestion: for symbols in the plot that can't have text inside because of their small size, is it possible to post the text to the right of the symbol?\r\n\r\nOne more thing. Along the x-axis, I noticed this text E[f(X)].  What value is associated with this text?\r\n\r\nMany thanks,\r\n\r\nIvan\r\n\r\n\r\n[multi-class_waterfall_plot.zip](https://github.com/slundberg/shap/files/4167537/multi-class_waterfall_plot.zip)\r\n",
  "closed_by": {
    "login": "slundberg",
    "id": 3740613,
    "node_id": "MDQ6VXNlcjM3NDA2MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3740613?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/slundberg",
    "html_url": "https://github.com/slundberg",
    "followers_url": "https://api.github.com/users/slundberg/followers",
    "following_url": "https://api.github.com/users/slundberg/following{/other_user}",
    "gists_url": "https://api.github.com/users/slundberg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/slundberg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/slundberg/subscriptions",
    "organizations_url": "https://api.github.com/users/slundberg/orgs",
    "repos_url": "https://api.github.com/users/slundberg/repos",
    "events_url": "https://api.github.com/users/slundberg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/slundberg/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/1034/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/1034/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
