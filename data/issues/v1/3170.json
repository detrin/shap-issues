{
  "url": "https://api.github.com/repos/shap/shap/issues/3170",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/3170/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/3170/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/3170/events",
  "html_url": "https://github.com/shap/shap/issues/3170",
  "id": 1830623133,
  "node_id": "I_kwDOBHDcK85tHRed",
  "number": 3170,
  "title": "Logistic regression - features with zero weight associated with non-zero SHAP values",
  "user": {
    "login": "inezpereira",
    "id": 20027814,
    "node_id": "MDQ6VXNlcjIwMDI3ODE0",
    "avatar_url": "https://avatars.githubusercontent.com/u/20027814?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/inezpereira",
    "html_url": "https://github.com/inezpereira",
    "followers_url": "https://api.github.com/users/inezpereira/followers",
    "following_url": "https://api.github.com/users/inezpereira/following{/other_user}",
    "gists_url": "https://api.github.com/users/inezpereira/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/inezpereira/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/inezpereira/subscriptions",
    "organizations_url": "https://api.github.com/users/inezpereira/orgs",
    "repos_url": "https://api.github.com/users/inezpereira/repos",
    "events_url": "https://api.github.com/users/inezpereira/events{/privacy}",
    "received_events_url": "https://api.github.com/users/inezpereira/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 5579086640,
      "node_id": "LA_kwDOBHDcK88AAAABTIobMA",
      "url": "https://api.github.com/repos/shap/shap/labels/awaiting%20feedback",
      "name": "awaiting feedback",
      "color": "DCA1FD",
      "default": false,
      "description": "Indicates that further information is required from the issue creator"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-08-01T07:18:16Z",
  "updated_at": "2023-08-25T16:15:54Z",
  "closed_at": "2023-08-25T16:15:54Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Creating an issue in case this is not the expected behavior and should be documented as a bug.\r\n\r\n### Discussed in https://github.com/shap/shap/discussions/3160\r\n\r\n<div type='discussions-op-text'>\r\n\r\n<sup>Originally posted by **inezpereira** July 31, 2023</sup>\r\nHello everyone!\r\n\r\nI have a Logistic Regression model which uses Elastic Net regularization (specifically, an [SGDClassifier](https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.SGDClassifier.html) with a log loss and an elasticnet penalty). I am using this model because I have a dataset with many relatively many features, and I wanted Elastic Net to do feature selection for me.\r\nI have fitted my model and now calculated the associated SHAP values. I noticed however that, often, even if a feature weight has been set to zero (thanks to the L1 regularization in Elastic Net), I still get a non-zero SHAP value.\r\n\r\nMy question is: \r\nIs this a violation of missingness? \r\nOr is it indeed possible to have non-zero SHAP values even if the weight calculated for this feature is zero?\r\n\r\nI've combed several talks by @slundberg, and had a look at [the original paper](https://papers.nips.cc/paper_files/paper/2017/file/8a20a8621978632d76c43dfd28b67767-Paper.pdf), but I am relatively new to SHAP, so your help would be very much appreciated :)\r\n\r\nBelow this code snippet I am using:\r\n```\r\nX_train_summary = shap.kmeans(X_train, 10)  \r\nexplainer = shap.KernelExplainer(model.predict_proba, X_train_summary, feature_names=model.feature_names_in_)\r\n# Calculates the SHAP values - It takes some time\r\nshap_values = explainer.shap_values(X_test)\r\n\r\n```\r\nThanks!</div>",
  "closed_by": {
    "login": "inezpereira",
    "id": 20027814,
    "node_id": "MDQ6VXNlcjIwMDI3ODE0",
    "avatar_url": "https://avatars.githubusercontent.com/u/20027814?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/inezpereira",
    "html_url": "https://github.com/inezpereira",
    "followers_url": "https://api.github.com/users/inezpereira/followers",
    "following_url": "https://api.github.com/users/inezpereira/following{/other_user}",
    "gists_url": "https://api.github.com/users/inezpereira/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/inezpereira/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/inezpereira/subscriptions",
    "organizations_url": "https://api.github.com/users/inezpereira/orgs",
    "repos_url": "https://api.github.com/users/inezpereira/repos",
    "events_url": "https://api.github.com/users/inezpereira/events{/privacy}",
    "received_events_url": "https://api.github.com/users/inezpereira/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/3170/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/3170/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
