{
  "url": "https://api.github.com/repos/shap/shap/issues/366",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/366/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/366/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/366/events",
  "html_url": "https://github.com/shap/shap/issues/366",
  "id": 393675173,
  "node_id": "MDU6SXNzdWUzOTM2NzUxNzM=",
  "number": 366,
  "title": "Understanding Keras and TensorFlow Text Classification Outputs",
  "user": {
    "login": "ukamath",
    "id": 4322740,
    "node_id": "MDQ6VXNlcjQzMjI3NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4322740?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ukamath",
    "html_url": "https://github.com/ukamath",
    "followers_url": "https://api.github.com/users/ukamath/followers",
    "following_url": "https://api.github.com/users/ukamath/following{/other_user}",
    "gists_url": "https://api.github.com/users/ukamath/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ukamath/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ukamath/subscriptions",
    "organizations_url": "https://api.github.com/users/ukamath/orgs",
    "repos_url": "https://api.github.com/users/ukamath/repos",
    "events_url": "https://api.github.com/users/ukamath/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ukamath/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-12-22T13:53:09Z",
  "updated_at": "2018-12-29T19:47:15Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I have a deep learning model for Text Classification with CNN and multiple layers. I used shap and kernel explainer as given below.\r\n\r\n```\r\nimport shap\r\n# first 100 training as background\r\nexplainer = shap.KernelExplainer(multichannel_multifilter_cnn_model.predict, X_train_seq_trunc[:100])\r\nshap_values = explainer.shap_values(X_test_seq_trunc[:100], nsamples=100)\r\nshap.summary_plot(shap_values, X_test_seq_trunc[:100])\r\n\r\n```\r\nAm I using the API right with training as background and testing for explanation?\r\nMy Text Sequence has maximum length of 24. Does this mean in the samples, feature 22 and 23 have the highest influence on the model? \r\n\r\n![image](https://user-images.githubusercontent.com/4322740/50375029-293bec80-05c5-11e9-83dc-195f8ef245be.png)\r\n\r\nshap.force_plot(explainer.expected_value[0], shap_values[0], X_test_seq_trunc[:100])\r\nOut of three classes, This gives me visualization of first class?\r\n\r\nThe output shows\r\n<img width=\"1106\" alt=\"screen shot 2018-12-22 at 8 43 42 am\" src=\"https://user-images.githubusercontent.com/4322740/50375067-cac33e00-05c5-11e9-8229-41f1e114c9c7.png\">\r\n\r\nHow to interpret this model output probabilities with colors? Why is 0.64 thresholds chosen? \r\nIf I select single feature, I get this, what to interpret from this?\r\n<img width=\"1106\" alt=\"screen shot 2018-12-22 at 8 45 33 am\" src=\"https://user-images.githubusercontent.com/4322740/50375088-14138d80-05c6-11e9-8baa-47407c535891.png\">\r\n\r\nThanks! And really appreciate the answers.\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/366/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/366/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
