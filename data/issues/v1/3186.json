{
  "url": "https://api.github.com/repos/shap/shap/issues/3186",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/3186/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/3186/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/3186/events",
  "html_url": "https://github.com/shap/shap/issues/3186",
  "id": 1845964912,
  "node_id": "I_kwDOBHDcK85uBzBw",
  "number": 3186,
  "title": "NumPy and Numba dependency issues",
  "user": {
    "login": "SPDA36",
    "id": 111393900,
    "node_id": "U_kgDOBqO8bA",
    "avatar_url": "https://avatars.githubusercontent.com/u/111393900?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SPDA36",
    "html_url": "https://github.com/SPDA36",
    "followers_url": "https://api.github.com/users/SPDA36/followers",
    "following_url": "https://api.github.com/users/SPDA36/following{/other_user}",
    "gists_url": "https://api.github.com/users/SPDA36/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SPDA36/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SPDA36/subscriptions",
    "organizations_url": "https://api.github.com/users/SPDA36/orgs",
    "repos_url": "https://api.github.com/users/SPDA36/repos",
    "events_url": "https://api.github.com/users/SPDA36/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SPDA36/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 486901334,
      "node_id": "MDU6TGFiZWw0ODY5MDEzMzQ=",
      "url": "https://api.github.com/repos/shap/shap/labels/question",
      "name": "question",
      "color": "cc317c",
      "default": true,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2023-08-10T22:16:48Z",
  "updated_at": "2023-08-12T20:20:02Z",
  "closed_at": "2023-08-12T20:18:29Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Issue Description\r\n\r\nHello,\r\nI ran into this issue when trying to install `shap-0.42.1` which required `numpy` to be downgraded.  `numpy` was downgraded from `1.25.2-py311h0b4df5a_0 --> 1.24.4-py311h0b4df5a_0\r\n`. After the downgrade, I could installed `shap`.  When I tried to import `shap`, then `numba` had a dependency issue which requires further downgrade of `numpy`.  `ImportError: Numba needs NumPy 1.24 or less.`  This leads to even further issues with other environment dependencies.\r\n\r\n### Minimal Reproducible Example\r\n\r\n```python\r\nimport shap\r\n```\r\n\r\n\r\n### Traceback\r\n\r\n```shell\r\n\r\n\r\n---> 23 import shap\r\n     24 shap.initjs()\r\n\r\nFile ~\\miniconda3\\envs\\\\Lib\\site-packages\\shap\\__init__.py:5\r\n      1 # flake8: noqa\r\n      3 __version__ = \"0.42.1\"\r\n----> 5 from ._explanation import Explanation, Cohorts\r\n      7 # explainers\r\n      8 from .explainers._explainer import Explainer\r\n\r\nFile ~\\miniconda3\\envs\\\\Lib\\site-packages\\shap\\_explanation.py:13\r\n     10 import sklearn\r\n     11 from slicer import Alias, Obj, Slicer\r\n---> 13 from .utils._exceptions import DimensionError\r\n     14 from .utils._general import OpChain\r\n     16 # slicer confuses pylint...\r\n     17 # pylint: disable=no-member\r\n\r\nFile ~\\miniconda3\\envs\\\\Lib\\site-packages\\shap\\utils\\__init__.py:1\r\n----> 1 from ._clustering import (\r\n      2     delta_minimization_order,\r\n      3     hclust,\r\n      4     hclust_ordering,\r\n      5     partition_tree,\r\n      6     partition_tree_shuffle,\r\n      7 )\r\n      8 from ._general import (\r\n      9     OpChain,\r\n     10     approximate_interactions,\r\n   (...)\r\n     20     suppress_stderr,\r\n     21 )\r\n     22 from ._masked_model import MaskedModel, make_masks\r\n\r\nFile ~\\miniconda3\\envs\\\\Lib\\site-packages\\shap\\utils\\_clustering.py:7\r\n      5 import scipy.spatial\r\n      6 import sklearn\r\n----> 7 from numba import njit\r\n      9 from ._general import safe_isinstance\r\n     10 from ._show_progress import show_progress\r\n\r\nFile ~\\miniconda3\\envs\\\\Lib\\site-packages\\numba\\__init__.py:55\r\n     50             msg = (\"Numba requires SciPy version 1.0 or greater. Got SciPy \"\r\n     51                    f\"{scipy.__version__}.\")\r\n     52             raise ImportError(msg)\r\n---> 55 _ensure_critical_deps()\r\n     56 # END DO NOT MOVE\r\n     57 # ---------------------- WARNING WARNING WARNING ----------------------------\r\n     60 from ._version import get_versions\r\n\r\nFile ~\\miniconda3\\envs\\\\Lib\\site-packages\\numba\\__init__.py:42, in _ensure_critical_deps()\r\n     40     raise ImportError(msg)\r\n     41 elif numpy_version > (1, 24):\r\n---> 42     raise ImportError(\"Numba needs NumPy 1.24 or less\")\r\n     43 try:\r\n     44     import scipy\r\n\r\nImportError: Numba needs NumPy 1.24 or less\r\n```\r\n\r\n\r\n\r\n### Expected Behavior\r\n\r\n_No response_\r\n\r\n### Bug report checklist\r\n\r\n- [X] I have checked that this issue has not already been reported.\r\n- [X] I have confirmed this bug exists on the [latest release](https://github.com/shap/shap/releases) of shap.\r\n- [ ] I have confirmed this bug exists on the [master branch](https://github.com/shap/shap/blob/master/CONTRIBUTING.md#installing-from-the-master-branch) of shap.\r\n- [ ] I'd be interested in making a PR to fix this bug\r\n\r\n### Installed Versions\r\n\r\n0.42.1",
  "closed_by": {
    "login": "connortann",
    "id": 71127464,
    "node_id": "MDQ6VXNlcjcxMTI3NDY0",
    "avatar_url": "https://avatars.githubusercontent.com/u/71127464?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/connortann",
    "html_url": "https://github.com/connortann",
    "followers_url": "https://api.github.com/users/connortann/followers",
    "following_url": "https://api.github.com/users/connortann/following{/other_user}",
    "gists_url": "https://api.github.com/users/connortann/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/connortann/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/connortann/subscriptions",
    "organizations_url": "https://api.github.com/users/connortann/orgs",
    "repos_url": "https://api.github.com/users/connortann/repos",
    "events_url": "https://api.github.com/users/connortann/events{/privacy}",
    "received_events_url": "https://api.github.com/users/connortann/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/3186/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/3186/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
