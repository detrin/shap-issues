{
  "url": "https://api.github.com/repos/shap/shap/issues/1095",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/1095/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/1095/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/1095/events",
  "html_url": "https://github.com/shap/shap/issues/1095",
  "id": 579178588,
  "node_id": "MDU6SXNzdWU1NzkxNzg1ODg=",
  "number": 1095,
  "title": "GradientExplainer missing expected_value",
  "user": {
    "login": "tommontgomery450",
    "id": 37197027,
    "node_id": "MDQ6VXNlcjM3MTk3MDI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/37197027?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tommontgomery450",
    "html_url": "https://github.com/tommontgomery450",
    "followers_url": "https://api.github.com/users/tommontgomery450/followers",
    "following_url": "https://api.github.com/users/tommontgomery450/following{/other_user}",
    "gists_url": "https://api.github.com/users/tommontgomery450/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tommontgomery450/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tommontgomery450/subscriptions",
    "organizations_url": "https://api.github.com/users/tommontgomery450/orgs",
    "repos_url": "https://api.github.com/users/tommontgomery450/repos",
    "events_url": "https://api.github.com/users/tommontgomery450/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tommontgomery450/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-03-11T10:59:52Z",
  "updated_at": "2020-03-11T11:25:10Z",
  "closed_at": "2020-03-11T11:25:10Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I have been doing binary classification using a dense neural network. The output layer has a single neuron with a sigmoid activation.\r\n\r\nWhen I tried to use the explainer.expected_value I saw that this property was not on the GradientExplainer and that the line of code that sets this is commented out (Looks like this has been that way since gradient.py was first added)\r\n\r\nUsing self.expected_value = self.run(self.model_output, self.model_inputs, self.data).mean(0) in the GradientExplainer gives me the average probability (for class 1) However if I sum up the Shap values for a single sample and add the expected_value as calculated it does not sum to the probability predicted by the NN.\r\n\r\nSince the NN is outputting a probability of class 1 I would expect this to be the case. Can you shed any light on this?",
  "closed_by": {
    "login": "tommontgomery450",
    "id": 37197027,
    "node_id": "MDQ6VXNlcjM3MTk3MDI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/37197027?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tommontgomery450",
    "html_url": "https://github.com/tommontgomery450",
    "followers_url": "https://api.github.com/users/tommontgomery450/followers",
    "following_url": "https://api.github.com/users/tommontgomery450/following{/other_user}",
    "gists_url": "https://api.github.com/users/tommontgomery450/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tommontgomery450/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tommontgomery450/subscriptions",
    "organizations_url": "https://api.github.com/users/tommontgomery450/orgs",
    "repos_url": "https://api.github.com/users/tommontgomery450/repos",
    "events_url": "https://api.github.com/users/tommontgomery450/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tommontgomery450/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/1095/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/1095/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
