{
  "url": "https://api.github.com/repos/shap/shap/issues/3111",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/3111/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/3111/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/3111/events",
  "html_url": "https://github.com/shap/shap/pull/3111",
  "id": 1815749359,
  "node_id": "PR_kwDOBHDcK85WGHbc",
  "number": 3111,
  "title": "DOCS: Enable pre-commit checks for notebooks",
  "user": {
    "login": "connortann",
    "id": 71127464,
    "node_id": "MDQ6VXNlcjcxMTI3NDY0",
    "avatar_url": "https://avatars.githubusercontent.com/u/71127464?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/connortann",
    "html_url": "https://github.com/connortann",
    "followers_url": "https://api.github.com/users/connortann/followers",
    "following_url": "https://api.github.com/users/connortann/following{/other_user}",
    "gists_url": "https://api.github.com/users/connortann/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/connortann/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/connortann/subscriptions",
    "organizations_url": "https://api.github.com/users/connortann/orgs",
    "repos_url": "https://api.github.com/users/connortann/repos",
    "events_url": "https://api.github.com/users/connortann/events{/privacy}",
    "received_events_url": "https://api.github.com/users/connortann/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 5577305596,
      "node_id": "LA_kwDOBHDcK88AAAABTG7t_A",
      "url": "https://api.github.com/repos/shap/shap/labels/ci",
      "name": "ci",
      "color": "006b75",
      "default": false,
      "description": "Relating to Continuous Integration / GitHub Actions"
    },
    {
      "id": 5579656496,
      "node_id": "LA_kwDOBHDcK88AAAABTJLNMA",
      "url": "https://api.github.com/repos/shap/shap/labels/documentation",
      "name": "documentation",
      "color": "D2EFC1",
      "default": true,
      "description": "Relating to readthedocs, notebooks, and exposition in docstrings"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/shap/shap/milestones/2",
    "html_url": "https://github.com/shap/shap/milestone/2",
    "labels_url": "https://api.github.com/repos/shap/shap/milestones/2/labels",
    "id": 9579906,
    "node_id": "MI_kwDOBHDcK84Aki2C",
    "number": 2,
    "title": "0.43.0",
    "description": "",
    "creator": {
      "login": "thatlittleboy",
      "id": 30731072,
      "node_id": "MDQ6VXNlcjMwNzMxMDcy",
      "avatar_url": "https://avatars.githubusercontent.com/u/30731072?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/thatlittleboy",
      "html_url": "https://github.com/thatlittleboy",
      "followers_url": "https://api.github.com/users/thatlittleboy/followers",
      "following_url": "https://api.github.com/users/thatlittleboy/following{/other_user}",
      "gists_url": "https://api.github.com/users/thatlittleboy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/thatlittleboy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thatlittleboy/subscriptions",
      "organizations_url": "https://api.github.com/users/thatlittleboy/orgs",
      "repos_url": "https://api.github.com/users/thatlittleboy/repos",
      "events_url": "https://api.github.com/users/thatlittleboy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/thatlittleboy/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 10,
    "closed_issues": 23,
    "state": "open",
    "created_at": "2023-06-25T10:11:50Z",
    "updated_at": "2023-08-26T14:27:48Z",
    "due_on": null,
    "closed_at": null
  },
  "comments": 9,
  "created_at": "2023-07-21T12:45:49Z",
  "updated_at": "2023-08-26T09:41:10Z",
  "closed_at": null,
  "author_association": "COLLABORATOR",
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/shap/shap/pulls/3111",
    "html_url": "https://github.com/shap/shap/pull/3111",
    "diff_url": "https://github.com/shap/shap/pull/3111.diff",
    "patch_url": "https://github.com/shap/shap/pull/3111.patch",
    "merged_at": null
  },
  "body": "## Overview\r\n\r\nAdds two setsof pre-commit checks to run on notebooks.\r\n\r\n1) A basic set of checks, that will run on all the notebooks:\r\n\r\n- `check-json` to ensure ipynb files are valid JSON\r\n- `nbqa ruff`, initially with a restricted subset of linting rules\r\n\r\n2) A more stringent set of checks for notebooks which have been brought up to scratch:\r\n\r\n- `nbqa ruff` with the same set of Ruff rules that are applied to the python package\r\n- `black` formatting\r\n\r\nThis PR also fixes up some small logical errors in a handful of notebooks to get these two hooks passing, and applies `black` to two example notebooks as a starting point to illustrate the second group of pre-commit checks.\r\n\r\nRelated: #3074, #3036\r\n\r\n## Discussion\r\n\r\nIt would be helpful to enable precommit hooks to help us review PRs relating to documentation. A lot of notebooks are in a messy state, so it's not possible to enable many linting rules without causing a really large diff. So, this PR is intended as a good starting point that we can build on over time.\r\n\r\nI envisage that as each notebook is tidied up and brought up to scratch, we can add it to the list of checks in the second group of precommit checks above. This gives us a way to track which notebooks are clean, and ensure that cleaned notebooks are easily \"locked-in\" to a tidy state.\r\n\r\nRelated: submitted a PR to ensure that notebooks are picked up by default by the check-json pre commit hook:\r\nhttps://github.com/pre-commit/identify/pull/401",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/3111/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/3111/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
