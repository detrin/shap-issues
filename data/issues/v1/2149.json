{
  "url": "https://api.github.com/repos/shap/shap/issues/2149",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/2149/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/2149/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/2149/events",
  "html_url": "https://github.com/shap/shap/issues/2149",
  "id": 976850676,
  "node_id": "MDU6SXNzdWU5NzY4NTA2NzY=",
  "number": 2149,
  "title": "Problem with numba==0.54.0",
  "user": {
    "login": "windisch",
    "id": 11347180,
    "node_id": "MDQ6VXNlcjExMzQ3MTgw",
    "avatar_url": "https://avatars.githubusercontent.com/u/11347180?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/windisch",
    "html_url": "https://github.com/windisch",
    "followers_url": "https://api.github.com/users/windisch/followers",
    "following_url": "https://api.github.com/users/windisch/following{/other_user}",
    "gists_url": "https://api.github.com/users/windisch/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/windisch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/windisch/subscriptions",
    "organizations_url": "https://api.github.com/users/windisch/orgs",
    "repos_url": "https://api.github.com/users/windisch/repos",
    "events_url": "https://api.github.com/users/windisch/events{/privacy}",
    "received_events_url": "https://api.github.com/users/windisch/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-08-23T09:58:18Z",
  "updated_at": "2023-07-18T23:35:03Z",
  "closed_at": "2023-07-18T23:35:03Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "When running\r\n\r\n```from shap import KernelExplainer```\r\n\r\nusing `shap==0.39.0` together with `numba==0.54.0`,  then the following exception is raised when `numpy<1.20.0` is used (for `numpy==1.20.0` everything seems fine). \r\n\r\nThis may be a numpy related issue, but you may could bin the numba and numpy requirements in shap to early detect version conflicts?\r\n\r\n```\r\n/usr/local/lib/python3.7/dist-packages/shap/__init__.py in <module>\r\n     10     warnings.warn(\"As of version 0.29.0 shap only supports Python 3 (not 2)!\")\r\n     11\r\n---> 12 from ._explanation import Explanation, Cohorts\r\n     13\r\n     14 # explainers\r\n\r\n/usr/local/lib/python3.7/dist-packages/shap/_explanation.py in <module>\r\n     10 from slicer import Slicer, Alias, Obj\r\n     11 # from ._order import Order\r\n---> 12 from .utils._general import OpChain\r\n     13\r\n     14 # slicer confuses pylint...\r\n\r\n/usr/local/lib/python3.7/dist-packages/shap/utils/__init__.py in <module>\r\n----> 1 from ._clustering import hclust_ordering, partition_tree, partition_tree_shuffle, delta_minimization_order, hclust\r\n      2 from ._general import approximate_interactions, potential_interactions, sample, safe_isinstance, assert_import, record_import_error\r\n      3 from ._general import shapley_coefficients, convert_name, format_value, ordinal_str, OpChain\r\n      4 from ._show_progress import show_progress\r\n      5 from ._masked_model import MaskedModel, make_masks\r\n\r\n/usr/local/lib/python3.7/dist-packages/shap/utils/_clustering.py in <module>\r\n      2 import scipy as sp\r\n      3 from scipy.spatial.distance import pdist\r\n----> 4 from numba import jit\r\n      5 import sklearn\r\n      6 import warnings\r\n\r\n/usr/local/lib/python3.7/dist-packages/numba/__init__.py in <module>\r\n     37\r\n     38 # Re-export decorators\r\n---> 39 from numba.core.decorators import (cfunc, generated_jit, jit, njit, stencil,\r\n     40                                    jit_module)\r\n     41\r\n\r\n/usr/local/lib/python3.7/dist-packages/numba/core/decorators.py in <module>\r\n     10\r\n     11 from numba.core.errors import DeprecationError, NumbaDeprecationWarning\r\n---> 12 from numba.stencils.stencil import stencil\r\n     13 from numba.core import config, extending, sigutils, registry\r\n     14\r\n\r\n/usr/local/lib/python3.7/dist-packages/numba/stencils/stencil.py in <module>\r\n      9 from llvmlite import ir as lir\r\n     10\r\n---> 11 from numba.core import types, typing, utils, ir, config, ir_utils, registry\r\n     12 from numba.core.typing.templates import (CallableTemplate, signature,\r\n     13                                          infer_global, AbstractTemplate)\r\n\r\n/usr/local/lib/python3.7/dist-packages/numba/core/ir_utils.py in <module>\r\n     14\r\n     15 import numba\r\n---> 16 from numba.core.extending import _Intrinsic\r\n     17 from numba.core import types, utils, typing, ir, analysis, postproc, rewrites, config, cgutils\r\n     18 from numba.core.typing.templates import (signature, infer_global,\r\n\r\n/usr/local/lib/python3.7/dist-packages/numba/core/extending.py in <module>\r\n     17 from numba.core.datamodel import models   # noqa: F401\r\n     18 from numba.core.datamodel import register_default as register_model  # noqa: F401, E501\r\n---> 19 from numba.core.pythonapi import box, unbox, reflect, NativeValue  # noqa: F401\r\n     20 from numba._helperlib import _import_cython_function  # noqa: F401\r\n     21 from numba.core.serialize import ReduceMixin\r\n\r\n/usr/local/lib/python3.7/dist-packages/numba/core/pythonapi.py in <module>\r\n     10\r\n     11 import ctypes\r\n---> 12 from numba import _helperlib\r\n     13 from numba.core import (\r\n     14     types, utils, config, lowering, cgutils, imputils, serialize,\r\n\r\nImportError: numpy.core.multiarray failed to import\r\n```",
  "closed_by": {
    "login": "connortann",
    "id": 71127464,
    "node_id": "MDQ6VXNlcjcxMTI3NDY0",
    "avatar_url": "https://avatars.githubusercontent.com/u/71127464?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/connortann",
    "html_url": "https://github.com/connortann",
    "followers_url": "https://api.github.com/users/connortann/followers",
    "following_url": "https://api.github.com/users/connortann/following{/other_user}",
    "gists_url": "https://api.github.com/users/connortann/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/connortann/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/connortann/subscriptions",
    "organizations_url": "https://api.github.com/users/connortann/orgs",
    "repos_url": "https://api.github.com/users/connortann/repos",
    "events_url": "https://api.github.com/users/connortann/events{/privacy}",
    "received_events_url": "https://api.github.com/users/connortann/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/2149/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/2149/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
