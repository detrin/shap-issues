{
  "url": "https://api.github.com/repos/shap/shap/issues/2875",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/2875/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/2875/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/2875/events",
  "html_url": "https://github.com/shap/shap/issues/2875",
  "id": 1622164991,
  "node_id": "I_kwDOBHDcK85gsEX_",
  "number": 2875,
  "title": "The SHAP explanations do not sum up to the model's output!",
  "user": {
    "login": "naveenagorre",
    "id": 84099812,
    "node_id": "MDQ6VXNlcjg0MDk5ODEy",
    "avatar_url": "https://avatars.githubusercontent.com/u/84099812?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/naveenagorre",
    "html_url": "https://github.com/naveenagorre",
    "followers_url": "https://api.github.com/users/naveenagorre/followers",
    "following_url": "https://api.github.com/users/naveenagorre/following{/other_user}",
    "gists_url": "https://api.github.com/users/naveenagorre/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/naveenagorre/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/naveenagorre/subscriptions",
    "organizations_url": "https://api.github.com/users/naveenagorre/orgs",
    "repos_url": "https://api.github.com/users/naveenagorre/repos",
    "events_url": "https://api.github.com/users/naveenagorre/events{/privacy}",
    "received_events_url": "https://api.github.com/users/naveenagorre/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-03-13T19:56:08Z",
  "updated_at": "2023-04-27T22:04:50Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi I have tried running the below script initially on my jupyetr notebook and ran without any errors:\r\n\r\nbackground = X_train[np.random.choice(X_train.shape[0], 10, replace=False)]\r\n\r\n# explain predictions of the model on three images\r\ne = shap.DeepExplainer(covid_CRmodel, np.expand_dims(background,axis=-1))\r\n# ...or pass tensors directly\r\n# e = shap.DeepExplainer((model.layers[0].input, model.layers[-1].output), background)\r\nX_test_expand =  np.expand_dims(X_test,axis=-1)\r\nshap_values = e.shap_values(X_test_expand[5:7])\r\n\r\n\r\nI'm trying to update it onot the Django interface that I'm developing and I'm receiving an error response like this  - \"The SHAP explanations do not sum up to the model's output! This is either because of a rounding error or because an operator in your computation graph was not fully supported. If the sum difference of 2.694559 is significant compared the scale of your model outputs please post as a github issue, with a reproducable example if possible so we can debug it.\"\r\n\r\nI have also tried all the suggestions like changing check_additivity=False etc but still unable to resolve it. Let me know of any clues.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/2875/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/2875/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
