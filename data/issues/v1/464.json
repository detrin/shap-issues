{
  "url": "https://api.github.com/repos/shap/shap/issues/464",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/464/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/464/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/464/events",
  "html_url": "https://github.com/shap/shap/issues/464",
  "id": 414961805,
  "node_id": "MDU6SXNzdWU0MTQ5NjE4MDU=",
  "number": 464,
  "title": "Bug when using `xgb_model.pred(pred_interactions=True)`",
  "user": {
    "login": "kyoungrok0517",
    "id": 1051900,
    "node_id": "MDQ6VXNlcjEwNTE5MDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1051900?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kyoungrok0517",
    "html_url": "https://github.com/kyoungrok0517",
    "followers_url": "https://api.github.com/users/kyoungrok0517/followers",
    "following_url": "https://api.github.com/users/kyoungrok0517/following{/other_user}",
    "gists_url": "https://api.github.com/users/kyoungrok0517/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kyoungrok0517/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kyoungrok0517/subscriptions",
    "organizations_url": "https://api.github.com/users/kyoungrok0517/orgs",
    "repos_url": "https://api.github.com/users/kyoungrok0517/repos",
    "events_url": "https://api.github.com/users/kyoungrok0517/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kyoungrok0517/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 486901329,
      "node_id": "MDU6TGFiZWw0ODY5MDEzMjk=",
      "url": "https://api.github.com/repos/shap/shap/labels/bug",
      "name": "bug",
      "color": "ee0701",
      "default": true,
      "description": "Indicates an unexpected problem or unintended behaviour"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-02-27T06:14:31Z",
  "updated_at": "2019-04-25T15:27:56Z",
  "closed_at": "2019-03-21T15:20:40Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "As suggested in https://github.com/slundberg/shap/issues/452 I'm now trying to use the native functionality of xgboost to get the SHAP importance and interaction. I'm posting here presuming the shap team is involved in adding shap into xgboost library.\r\n\r\n**Problem**\r\nI get the following error when I use `pred_interactions=True` to get the feature interaction.\r\n\r\n```python\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-14-6baa08e16bb5> in <module>()\r\n----> 1 preds = model.predict(dtest, pred_contribs=True, approx_contribs=True, pred_interactions=True)\r\n\r\n~/anaconda/lib/python3.6/site-packages/xgboost/core.py in predict(self, data, output_margin, ntree_limit, pred_leaf, pred_contribs, approx_contribs, pred_interactions, validate_features)\r\n   1237                     preds = preds.reshape(nrow, data.num_col() + 1, data.num_col() + 1)\r\n   1238                 else:\r\n-> 1239                     preds = preds.reshape(nrow, ngroup, data.num_col() + 1, data.num_col() + 1)\r\n   1240             elif pred_contribs:\r\n   1241                 ngroup = int(chunk_size / (data.num_col() + 1))\r\n\r\nValueError: cannot reshape array of size 148317785 into shape (35255,0,601,601)\r\n```",
  "closed_by": {
    "login": "kyoungrok0517",
    "id": 1051900,
    "node_id": "MDQ6VXNlcjEwNTE5MDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1051900?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kyoungrok0517",
    "html_url": "https://github.com/kyoungrok0517",
    "followers_url": "https://api.github.com/users/kyoungrok0517/followers",
    "following_url": "https://api.github.com/users/kyoungrok0517/following{/other_user}",
    "gists_url": "https://api.github.com/users/kyoungrok0517/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kyoungrok0517/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kyoungrok0517/subscriptions",
    "organizations_url": "https://api.github.com/users/kyoungrok0517/orgs",
    "repos_url": "https://api.github.com/users/kyoungrok0517/repos",
    "events_url": "https://api.github.com/users/kyoungrok0517/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kyoungrok0517/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/464/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/464/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
