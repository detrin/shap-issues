{
  "url": "https://api.github.com/repos/shap/shap/issues/471",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/471/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/471/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/471/events",
  "html_url": "https://github.com/shap/shap/issues/471",
  "id": 416054996,
  "node_id": "MDU6SXNzdWU0MTYwNTQ5OTY=",
  "number": 471,
  "title": "DeepExplainer does not correctly explain a linear model",
  "user": {
    "login": "jorgecarleitao",
    "id": 2772607,
    "node_id": "MDQ6VXNlcjI3NzI2MDc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2772607?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jorgecarleitao",
    "html_url": "https://github.com/jorgecarleitao",
    "followers_url": "https://api.github.com/users/jorgecarleitao/followers",
    "following_url": "https://api.github.com/users/jorgecarleitao/following{/other_user}",
    "gists_url": "https://api.github.com/users/jorgecarleitao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jorgecarleitao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jorgecarleitao/subscriptions",
    "organizations_url": "https://api.github.com/users/jorgecarleitao/orgs",
    "repos_url": "https://api.github.com/users/jorgecarleitao/repos",
    "events_url": "https://api.github.com/users/jorgecarleitao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jorgecarleitao/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-03-01T11:12:15Z",
  "updated_at": "2019-03-01T17:43:24Z",
  "closed_at": "2019-03-01T17:43:23Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "It seems that DeepExplainer is not correctly explaining a linear model fitted on linear data. I have written a unit-test demonstrating this behavior, #470. \r\n\r\nThis test consists in:\r\n\r\n    1. generate data with 2 independent features and a target `y = 1 + 2 x1 + x2 + small noise`\r\n    2. define a linear model with Keras\r\n    3. fit the model to the data\r\n    4. confirm that the model fits the data correctly\r\n    5. explain the fitted model\r\n    6. confirm that the shap values correspond to the expected values of a linear model, namely, what is described in the docs as `\"Assuming features are independent leads to interventional SHAP values which for a linear model are coef[i] * (x[i] - x.mean(0)[i]) for the ith feature\"`.\r\n\r\nThis test currently fails: the model fits correctly, but the explanation is different from the equation above, see #470.\r\n\r\nThis hints for a potential bug on the source code, specially since #468 confirms that the `LinearExplainer` computes the shap values given by the equation above.\r\n\r\n(I am assuming here that DeepExplainer with a linear model should give the same explanations as the LinearExplainer, when the data and fitted weights of both models are statistically the same)",
  "closed_by": {
    "login": "slundberg",
    "id": 3740613,
    "node_id": "MDQ6VXNlcjM3NDA2MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3740613?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/slundberg",
    "html_url": "https://github.com/slundberg",
    "followers_url": "https://api.github.com/users/slundberg/followers",
    "following_url": "https://api.github.com/users/slundberg/following{/other_user}",
    "gists_url": "https://api.github.com/users/slundberg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/slundberg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/slundberg/subscriptions",
    "organizations_url": "https://api.github.com/users/slundberg/orgs",
    "repos_url": "https://api.github.com/users/slundberg/repos",
    "events_url": "https://api.github.com/users/slundberg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/slundberg/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/471/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/471/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
