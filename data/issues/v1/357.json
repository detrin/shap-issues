{
  "url": "https://api.github.com/repos/shap/shap/issues/357",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/357/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/357/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/357/events",
  "html_url": "https://github.com/shap/shap/issues/357",
  "id": 391114714,
  "node_id": "MDU6SXNzdWUzOTExMTQ3MTQ=",
  "number": 357,
  "title": "np.nan used as background data",
  "user": {
    "login": "fl2o",
    "id": 17832376,
    "node_id": "MDQ6VXNlcjE3ODMyMzc2",
    "avatar_url": "https://avatars.githubusercontent.com/u/17832376?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fl2o",
    "html_url": "https://github.com/fl2o",
    "followers_url": "https://api.github.com/users/fl2o/followers",
    "following_url": "https://api.github.com/users/fl2o/following{/other_user}",
    "gists_url": "https://api.github.com/users/fl2o/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fl2o/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fl2o/subscriptions",
    "organizations_url": "https://api.github.com/users/fl2o/orgs",
    "repos_url": "https://api.github.com/users/fl2o/repos",
    "events_url": "https://api.github.com/users/fl2o/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fl2o/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-12-14T13:38:28Z",
  "updated_at": "2018-12-14T20:43:18Z",
  "closed_at": "2018-12-14T20:42:27Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi, \r\n\r\nI want to explain the output of a special type of function.\r\nFor this function, \"np.nan\" values are the toggle off (they represent \"we have no information about this feature\"). Hence, for the init of KernelExplainer, my data argument is a vector of np.nan.\r\n\r\nThe issue arises with the \"shap_values\" method, inside the \"varying_groups\" function\r\n`num_mismatches = np.sum(np.abs(x_group - self.data.data[:, inds]) > 1e-7)`\r\n\r\nfloat - np.nan = np.nan, \r\nnp.nan > 1e-7 is False, hence\r\nnum_mismatches = 0 despite my input is not nan anymore.\r\n\r\nI made a dirty hack for my purpose only and the rest works nicelyüëç \r\nbut it would be nice if you could handle the case of background data being nan properly.\r\n\r\nThanks in advance!\r\n\r\n",
  "closed_by": {
    "login": "slundberg",
    "id": 3740613,
    "node_id": "MDQ6VXNlcjM3NDA2MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3740613?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/slundberg",
    "html_url": "https://github.com/slundberg",
    "followers_url": "https://api.github.com/users/slundberg/followers",
    "following_url": "https://api.github.com/users/slundberg/following{/other_user}",
    "gists_url": "https://api.github.com/users/slundberg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/slundberg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/slundberg/subscriptions",
    "organizations_url": "https://api.github.com/users/slundberg/orgs",
    "repos_url": "https://api.github.com/users/slundberg/repos",
    "events_url": "https://api.github.com/users/slundberg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/slundberg/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/357/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/357/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
