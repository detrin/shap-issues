{
  "url": "https://api.github.com/repos/shap/shap/issues/526",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/526/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/526/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/526/events",
  "html_url": "https://github.com/shap/shap/issues/526",
  "id": 428404125,
  "node_id": "MDU6SXNzdWU0Mjg0MDQxMjU=",
  "number": 526,
  "title": "TreeExplainer on LightGBMClassifier returns 2D array of shap values in binary classification case",
  "user": {
    "login": "imatiach-msft",
    "id": 24683184,
    "node_id": "MDQ6VXNlcjI0NjgzMTg0",
    "avatar_url": "https://avatars.githubusercontent.com/u/24683184?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/imatiach-msft",
    "html_url": "https://github.com/imatiach-msft",
    "followers_url": "https://api.github.com/users/imatiach-msft/followers",
    "following_url": "https://api.github.com/users/imatiach-msft/following{/other_user}",
    "gists_url": "https://api.github.com/users/imatiach-msft/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/imatiach-msft/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/imatiach-msft/subscriptions",
    "organizations_url": "https://api.github.com/users/imatiach-msft/orgs",
    "repos_url": "https://api.github.com/users/imatiach-msft/repos",
    "events_url": "https://api.github.com/users/imatiach-msft/events{/privacy}",
    "received_events_url": "https://api.github.com/users/imatiach-msft/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 15,
  "created_at": "2019-04-02T19:33:33Z",
  "updated_at": "2022-08-26T14:40:24Z",
  "closed_at": null,
  "author_association": "COLLABORATOR",
  "active_lock_reason": null,
  "body": "For the binary classification case, when using TreeExplainer with scikit-learn the shap values are in a 3D array where the 1st dimension is the class, the 2nd dimension rows and the 3rd dimension columns.  However, when using LightGBMClassifier in binary classification case a 2D array is returned (just rows/columns, no negative/positive classes).  For multiclass case LightGBMClassifier also returns a 3D array, with a 2D array of shap values for each class.\r\nWhile this is fine from a correctness perspective since we just need to take the negative of the 2D array for the negative class, eg return:\r\nshap_values = [-binary_shap_values, binary_shap_values]\r\nThis is inconsistent with what the other binary classification learners return, eg scikit learn.\r\nIt looks like the issue may need to be fixed in lightgbm native code and not shap.\r\nWas there a specific reason that the API is inconsistent here - and what would be the preferred fix?  Should this be fixed in lightgbm's codebase or shap's codebase?",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/526/reactions",
    "total_count": 7,
    "+1": 7,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/526/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
