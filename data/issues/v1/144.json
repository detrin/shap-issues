{
  "url": "https://api.github.com/repos/shap/shap/issues/144",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/144/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/144/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/144/events",
  "html_url": "https://github.com/shap/shap/issues/144",
  "id": 338324278,
  "node_id": "MDU6SXNzdWUzMzgzMjQyNzg=",
  "number": 144,
  "title": "Feature impact - for better or for worse",
  "user": {
    "login": "ehudkr",
    "id": 15989012,
    "node_id": "MDQ6VXNlcjE1OTg5MDEy",
    "avatar_url": "https://avatars.githubusercontent.com/u/15989012?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ehudkr",
    "html_url": "https://github.com/ehudkr",
    "followers_url": "https://api.github.com/users/ehudkr/followers",
    "following_url": "https://api.github.com/users/ehudkr/following{/other_user}",
    "gists_url": "https://api.github.com/users/ehudkr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ehudkr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ehudkr/subscriptions",
    "organizations_url": "https://api.github.com/users/ehudkr/orgs",
    "repos_url": "https://api.github.com/users/ehudkr/repos",
    "events_url": "https://api.github.com/users/ehudkr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ehudkr/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-07-04T15:54:57Z",
  "updated_at": "2019-02-13T15:56:39Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Regarding the Tree-SHAP summary plot. It is a great way to assess the impact of features on the *model's* output, but one thing I'm missing is validating whether that impact improves the prediction or worsens it.\r\n\r\nIf I understand correctly from the paper, the SHAP values are calculated in equation (2):\r\n![image](https://user-images.githubusercontent.com/15989012/42282632-d263b0fa-7faf-11e8-80eb-dfa2ccdc24b9.png)\r\nMeasuring the impact of feature *i* on the model's prediction.\r\n\r\nI would like to argue that it misses an important component: the loss of the model with and without that added feature.\r\nLets denote *l(x,y)* as some loss function (lower the better), then for each feature *i* we keep two additional values:\r\n![image](https://user-images.githubusercontent.com/15989012/42284166-51801e4c-7fb4-11e8-9dff-fea35c7c16bf.png)\r\n\r\nWe can now define two statistics:\r\n![image](https://user-images.githubusercontent.com/15989012/42284216-7e2917f0-7fb4-11e8-9e2a-18e2fd9bbd75.png)\r\nThe latter, of course, used for the SHAP value. \r\n\r\nWe can look at the 4 resulting possibilities:\r\n```\r\nΔf>0 & Δl>0    high impact, screws prediction\r\nΔf>0 & Δl<0    high impact, benefits prediction\r\nΔf<0 & Δl>0    low impact,  screws prediction\r\nΔf<0 & Δl<0    low impact,  benefits prediction\r\n```\r\nWe can then add another \"dimension\" to the summary plot describing `sign(Δl)`. One simple way that occurred to me is, circle-markers for Δl>0 and x-markers for Δl<0. Another way could be an optional coloring of the circles according to `Δl`, instead of the current way (that is, the value of the feature of the individual)\r\n\r\nI would like to hear your take on this idea. Does it even sounds reasonable? Am I missing something obvious? \r\nEspecially since I strictly assume there's no monotonicity of loss when adding features to a tree model. Which I believe to be a fair assumption, since all trees have the same model specification - mainly, they do not differ by their hyper-parameters. Therefore, the more features, the more complex the tree ought to be, and since models have constant complexity along the process, we expect the loss to vary.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/144/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/144/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
