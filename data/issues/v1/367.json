{
  "url": "https://api.github.com/repos/shap/shap/issues/367",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/367/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/367/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/367/events",
  "html_url": "https://github.com/shap/shap/issues/367",
  "id": 393833465,
  "node_id": "MDU6SXNzdWUzOTM4MzM0NjU=",
  "number": 367,
  "title": "Understanding SHAP for multi-classification problem",
  "user": {
    "login": "r06922112",
    "id": 43275287,
    "node_id": "MDQ6VXNlcjQzMjc1Mjg3",
    "avatar_url": "https://avatars.githubusercontent.com/u/43275287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/r06922112",
    "html_url": "https://github.com/r06922112",
    "followers_url": "https://api.github.com/users/r06922112/followers",
    "following_url": "https://api.github.com/users/r06922112/following{/other_user}",
    "gists_url": "https://api.github.com/users/r06922112/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/r06922112/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/r06922112/subscriptions",
    "organizations_url": "https://api.github.com/users/r06922112/orgs",
    "repos_url": "https://api.github.com/users/r06922112/repos",
    "events_url": "https://api.github.com/users/r06922112/events{/privacy}",
    "received_events_url": "https://api.github.com/users/r06922112/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 25,
  "created_at": "2018-12-24T08:16:58Z",
  "updated_at": "2023-07-21T09:54:16Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi, I am new to SHAP , it is a great tools, but I have some questions that I am not sure :\r\n\r\n**1. If mean(|SHAP|) of feature A is largest, can we determine feature A is the most important feature, or only means feature A is most influential feature ? (maybe feature A is not a good feature for predicting)**\r\n\r\n\r\n\r\n**2. I have a 5-classes classification problem use XGBoost as the model. Running the code below:**\r\n\r\n> (In my case, some columns in shpa_values would be NaN, so I use approximate=True to fix it)\r\n> shpae of shap_values is : (5, 400000, 17) means 5 classes,  400000 rows, each 17 columns.\r\n\r\n```\r\nexplainer = shap.TreeExplainer(model)\r\nshap_values = explainer.shap_values(X_test,approximate=True)\r\nshap.summary_plot(shap_values, X_test, plot_type=\"bar\")\r\n```\r\n![image](https://user-images.githubusercontent.com/43275287/50393354-abc4d780-0790-11e9-907e-b060e1421ddc.png)\r\n\r\n\r\nMy understanding of this figure :\r\nFor f16 , mean(|SHAP|) is about 1.7 on Classs 4, and (2.8-1.6)=1.2 on Class 0, it means f16 influence predicting Class 4 more than Class 0. Also the f16 is the most influential feature.**\r\n\r\n**3. And summary plot for \"CLASS 0\"  :**\r\n```\r\nshap.summary_plot(shap_values[0], X_test)\r\n```\r\n![image](https://user-images.githubusercontent.com/43275287/50394120-3956f600-0796-11e9-84b9-5b56af5c0b42.png)\r\n\r\nMy understanding of this figure :\r\nFor f11, if f11 value being higher, the model tends to classify the data to CLASS 0.\r\n\r\nThanks!",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/367/reactions",
    "total_count": 35,
    "+1": 24,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 10,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/367/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
