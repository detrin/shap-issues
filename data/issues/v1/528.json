{
  "url": "https://api.github.com/repos/shap/shap/issues/528",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/528/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/528/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/528/events",
  "html_url": "https://github.com/shap/shap/issues/528",
  "id": 428728685,
  "node_id": "MDU6SXNzdWU0Mjg3Mjg2ODU=",
  "number": 528,
  "title": "Colorbar feature scale mismatch between dependence plot and summary plot ",
  "user": {
    "login": "luisneumann",
    "id": 26399207,
    "node_id": "MDQ6VXNlcjI2Mzk5MjA3",
    "avatar_url": "https://avatars.githubusercontent.com/u/26399207?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luisneumann",
    "html_url": "https://github.com/luisneumann",
    "followers_url": "https://api.github.com/users/luisneumann/followers",
    "following_url": "https://api.github.com/users/luisneumann/following{/other_user}",
    "gists_url": "https://api.github.com/users/luisneumann/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luisneumann/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luisneumann/subscriptions",
    "organizations_url": "https://api.github.com/users/luisneumann/orgs",
    "repos_url": "https://api.github.com/users/luisneumann/repos",
    "events_url": "https://api.github.com/users/luisneumann/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luisneumann/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-04-03T12:03:57Z",
  "updated_at": "2023-08-26T08:59:05Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi, first of all, thanks for the great package. I am unsure if this is an issue or if i am misunderstanding the colorbar on the summary plot.\r\n\r\nI have a classifier using Catboost, with a SHAP explainer as shown below:\r\n\r\nmodel=cb.CatBoostClassifier (iterations=100, depth=8, learning_rate=0.1, loss_function='Logloss')  \r\nmodel.fit(X_train, y_train,cat_features=categorical_features_indices,eval_set=(X_test, y_test),plot=False)  \r\nexplainer = shap.TreeExplainer(model)  \r\nshap_values = explainer.shap_values(cb.Pool(X_train,y_train,cat_features=categorical_features_indices))  \r\n\r\n I create a dependence plot for a single variable using filtered dataframes so there was only one variable to scale the colorbar by:\r\n\r\nvar_to_plot='TestVar'  # (an int64 variable)  \r\nidx=X_train.columns.get_loc(var_to_plot)  \r\nshap_plot=shap_values[:,idx]  \r\nXtrain_plot=X_train[var_to_plot]  \r\nshap.dependence_plot(var_to_plot, shap_plot[:, None], X_train[var_to_plot].to_frame())  \r\n#The dependence plot using the line below is identical to the one obtained using the line above  \r\n#shap.dependence_plot(var_to_plot, shap_values, X_train,interaction_index=\"TestVar\")\r\n\r\nHowever, when I compare the dependence plot to the summary plot, the summary plot suggests the largest SHAP values of around 0.8 occur for the highest values of TestVar, but the dependence plot shows that SHAP values of around 0.8 occur for the lower values of TestVar. The color scale on both plots seems inconsistent.\r\n\r\n![image002](https://user-images.githubusercontent.com/26399207/55476625-d0b7c900-5662-11e9-9813-0c173db949b4.jpg)\r\n\r\nFor reference, I am on SHAP 0.28.5 and matplotlib 2.1.1",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/528/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/528/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
