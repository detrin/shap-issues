{
  "url": "https://api.github.com/repos/shap/shap/issues/1025",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/1025/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/1025/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/1025/events",
  "html_url": "https://github.com/shap/shap/issues/1025",
  "id": 558093134,
  "node_id": "MDU6SXNzdWU1NTgwOTMxMzQ=",
  "number": 1025,
  "title": "Add NGBoost support in TreeExplainer",
  "user": {
    "login": "GitAnalyst",
    "id": 23650341,
    "node_id": "MDQ6VXNlcjIzNjUwMzQx",
    "avatar_url": "https://avatars.githubusercontent.com/u/23650341?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/GitAnalyst",
    "html_url": "https://github.com/GitAnalyst",
    "followers_url": "https://api.github.com/users/GitAnalyst/followers",
    "following_url": "https://api.github.com/users/GitAnalyst/following{/other_user}",
    "gists_url": "https://api.github.com/users/GitAnalyst/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/GitAnalyst/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/GitAnalyst/subscriptions",
    "organizations_url": "https://api.github.com/users/GitAnalyst/orgs",
    "repos_url": "https://api.github.com/users/GitAnalyst/repos",
    "events_url": "https://api.github.com/users/GitAnalyst/events{/privacy}",
    "received_events_url": "https://api.github.com/users/GitAnalyst/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-01-31T12:05:50Z",
  "updated_at": "2020-01-31T20:46:15Z",
  "closed_at": "2020-01-31T20:46:15Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hey, there is a new tree algorithm in town called Natural Gradient Boosting - [NGBoost](https://stanfordmlgroup.github.io/projects/ngboost/). It doesn't have documentation yet, but its main appeal is that it brings probabilistic predictions, which is something new for regression tasks. It would be great to add this to TreeExplainer support, it follows Scikit-Learn conventions.\r\nExample:\r\n```python\r\nimport shap\r\nimport ngboost\r\nfrom ngboost.learners import default_tree_learner\r\nfrom ngboost.distns import Normal\r\nfrom ngboost.scores import MLE\r\n\r\ndataset = load_boston()\r\nX, y = dataset.data, dataset.target\r\n\r\nmodel = NGBRegressor(Base=default_tree_learner, Dist=Normal, Score=MLE).fit(X, y)\r\nprint(type(model))\r\n```\r\nReturns type:\r\n```\r\n<class 'ngboost.api.NGBRegressor'>\r\n```\r\nTreeExplainer returns an exception:\r\n```python\r\nexplainer = shap.TreeExplainer(model)\r\nshap_values = explainer.shap_values(X)\r\n```\r\n```\r\nException: Model type not yet supported by TreeExplainer\r\n```\r\n\r\nModel predicts as usual:\r\n```python\r\nX_sample = X[0:3,:]\r\nngb.predict(X_sample) # point predictions\r\n```\r\nAnd for each observation we can predict probability distribution:\r\n```python\r\ndist = ngb.pred_dist(X_sample)\r\nprint(dist.loc[0:3]) # mean (same as point prediction)\r\nprint(dist.scale[0:3]) # standard deviation associated to point prediction\r\n```\r\n\r\n\r\n",
  "closed_by": {
    "login": "slundberg",
    "id": 3740613,
    "node_id": "MDQ6VXNlcjM3NDA2MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3740613?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/slundberg",
    "html_url": "https://github.com/slundberg",
    "followers_url": "https://api.github.com/users/slundberg/followers",
    "following_url": "https://api.github.com/users/slundberg/following{/other_user}",
    "gists_url": "https://api.github.com/users/slundberg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/slundberg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/slundberg/subscriptions",
    "organizations_url": "https://api.github.com/users/slundberg/orgs",
    "repos_url": "https://api.github.com/users/slundberg/repos",
    "events_url": "https://api.github.com/users/slundberg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/slundberg/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/1025/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/1025/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
