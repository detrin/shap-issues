{
  "url": "https://api.github.com/repos/shap/shap/issues/1650",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/1650/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/1650/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/1650/events",
  "html_url": "https://github.com/shap/shap/issues/1650",
  "id": 765326968,
  "node_id": "MDU6SXNzdWU3NjUzMjY5Njg=",
  "number": 1650,
  "title": "Document exact GPU compilation procedure using CUDA_PATH",
  "user": {
    "login": "mirekphd",
    "id": 36706320,
    "node_id": "MDQ6VXNlcjM2NzA2MzIw",
    "avatar_url": "https://avatars.githubusercontent.com/u/36706320?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mirekphd",
    "html_url": "https://github.com/mirekphd",
    "followers_url": "https://api.github.com/users/mirekphd/followers",
    "following_url": "https://api.github.com/users/mirekphd/following{/other_user}",
    "gists_url": "https://api.github.com/users/mirekphd/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mirekphd/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mirekphd/subscriptions",
    "organizations_url": "https://api.github.com/users/mirekphd/orgs",
    "repos_url": "https://api.github.com/users/mirekphd/repos",
    "events_url": "https://api.github.com/users/mirekphd/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mirekphd/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 29,
  "created_at": "2020-12-13T12:03:05Z",
  "updated_at": "2022-11-23T11:42:17Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "When invoking:\r\n`shap_values_train = explainer.shap_values(X=train_x, y=train_y)`\r\nI'm getting this error raised here https://github.com/slundberg/shap/blob/6af9e1008702fb0fab939bf2154bbf93dfe84a16/shap/explainers/_gpu_tree.py#L8 as a result of missing CUDA extension `_cext_gpu.lib`, which should have been compiled by [`compile_cuda_module`](https://github.com/slundberg/shap/blob/5831d55b598bf17b63fd4c81f9799c4d771d0bc7/setup.py#L60) if I had the `CUDA_PATH` env var defined at pip-installation time (as part of `docker build` in my case). \r\n\r\nCan we have a more specific error message (telling user exactly what to do, complete with an example path for a given location of `nvcc`)?\r\n\r\nI did notice this remark in the docs on [shap.GPUTreeExplainer](https://shap.readthedocs.io/en/latest/generated/shap.GPUTreeExplainer.html), :\r\n_\"Currently requires source build with cuda available and ‘CUDA_PATH’ environment variable defined.\"_\r\nbut it was not clear enough about the role of CUDA_PATH (just having it created obviously was not enough).\r\n\r\nA more specific error message would point me to the exact solution even faster, without looking into your source code:)\r\n\r\nRegarding the \"source build' part there could be also some clarification on how to proceed, e.g. ideally in a form of exact compilation instructions or a `Dockerfile` like this one: [dockerfile.gpu](https://github.com/microsoft/LightGBM/blob/master/docker/gpu/dockerfile.gpu#L84 ).\r\n\r\nHaving an exact compilation example is rather important, because the path to `nvcc` looks like this:\r\n`/usr/local/cuda-10.1/bin/nvcc`\r\nso there are at least 4 ways to define the path:\r\n```\r\nexport CUDA_PATH=/usr/local/cuda-10.1/bin\r\nexport CUDA_PATH=/usr/local/cuda-10.1/bin/\r\nexport CUDA_PATH=/usr/local/cuda-10.1\r\nexport CUDA_PATH=/usr/local/cuda-10.1/\r\n```\r\nAnd here only the last two would work given how the variable is used:\r\nhttps://github.com/slundberg/shap/blob/5831d55b598bf17b63fd4c81f9799c4d771d0bc7/setup.py#L63",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/1650/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/1650/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
