{
  "url": "https://api.github.com/repos/shap/shap/issues/1898",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/1898/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/1898/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/1898/events",
  "html_url": "https://github.com/shap/shap/issues/1898",
  "id": 838338773,
  "node_id": "MDU6SXNzdWU4MzgzMzg3NzM=",
  "number": 1898,
  "title": "SHAP values on images: low predictions have high positive SHAP values",
  "user": {
    "login": "ekrell",
    "id": 4443660,
    "node_id": "MDQ6VXNlcjQ0NDM2NjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4443660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ekrell",
    "html_url": "https://github.com/ekrell",
    "followers_url": "https://api.github.com/users/ekrell/followers",
    "following_url": "https://api.github.com/users/ekrell/following{/other_user}",
    "gists_url": "https://api.github.com/users/ekrell/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ekrell/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ekrell/subscriptions",
    "organizations_url": "https://api.github.com/users/ekrell/orgs",
    "repos_url": "https://api.github.com/users/ekrell/repos",
    "events_url": "https://api.github.com/users/ekrell/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ekrell/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2021-03-23T04:31:30Z",
  "updated_at": "2021-03-23T04:31:30Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I have trained two resnet models using pytorch and the EuroSAT dataset for land use classification. One model is only the RGB bands and the other has all 13 spectral bands. I only trained these models because I am interested in SHAP on arbitrary # of bands. First, I want to fully understand the RGB output, then the full 13. \r\n\r\nGithub: https://github.com/ekrell/shap_multiband\r\n\r\nTo explain the contribution of spatial regions, I applied PartitionShap to both models. Both gave SHAP explanations that differed from what I expected. Consider the RGB-model results. (The sat images on top correspond to the black images along the first SHAP image_plot column). From the examples on the documentation (mnist, the egret/boat, etc), I expected to have higher magnitude positive SHAP values on the higher probable classes and negative for the lower. \r\n\r\n![SHAP RGB](https://i.imgur.com/VgwC0c5.png)\r\n\r\nFirst row: no high magnitude SHAP values for the top class, but higher for the bottom two. \r\nSecond row: Similar to first row\r\nThird row: large positive in both top and bottom classes. \r\nForth row: This one is the most expected, a gradiant (sort of) from high positive to high negative. \r\nFifth row: Again, subtle SHAP values in top prediction, greater in the bottom. Here, I would expect the superpixels for \"river\" to be along the river.\r\n\r\nPerhaps I understand the values wrong. \r\nConsider the fifth row. 'residential', the bottom prediction, has high positive SHAP in the region that is not the water. That makes sense since the river presence should lower \"residential\". \r\nSimilarly, \"SeaLake\" shows strong negative in the non-river region since the land lowers prob of class \"SeaLake\" \r\nSo, the magnitude of SHAP is interpreted w.r.t that class rather than comparing magnitudes across the columns. \r\nIs this a correct understanding? If so, that does help a lot. But does not explain why the top prediction usually has lower magnitudes overall than the bottom predictions. There is spatial autocorrelation across pixel regions, which perhaps causes the SHAP values to be shared across same-contribution features and thus individually low magnitude. \r\n\r\nI appreciate any guidance to interpret this output.\r\nThanks!",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/1898/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/1898/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
