{
  "url": "https://api.github.com/repos/shap/shap/issues/486",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/486/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/486/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/486/events",
  "html_url": "https://github.com/shap/shap/issues/486",
  "id": 419220672,
  "node_id": "MDU6SXNzdWU0MTkyMjA2NzI=",
  "number": 486,
  "title": "Best way to use SHAP for text without losing word position",
  "user": {
    "login": "OanaMariaCamburu",
    "id": 33750063,
    "node_id": "MDQ6VXNlcjMzNzUwMDYz",
    "avatar_url": "https://avatars.githubusercontent.com/u/33750063?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/OanaMariaCamburu",
    "html_url": "https://github.com/OanaMariaCamburu",
    "followers_url": "https://api.github.com/users/OanaMariaCamburu/followers",
    "following_url": "https://api.github.com/users/OanaMariaCamburu/following{/other_user}",
    "gists_url": "https://api.github.com/users/OanaMariaCamburu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/OanaMariaCamburu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/OanaMariaCamburu/subscriptions",
    "organizations_url": "https://api.github.com/users/OanaMariaCamburu/orgs",
    "repos_url": "https://api.github.com/users/OanaMariaCamburu/repos",
    "events_url": "https://api.github.com/users/OanaMariaCamburu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/OanaMariaCamburu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-03-10T19:11:08Z",
  "updated_at": "2019-03-11T21:08:38Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi,\r\n\r\nThere are a few comments about using SHAP for text, such as https://github.com/slundberg/shap/issues/40 or the notebook https://slundberg.github.io/shap/notebooks/linear_explainer/Sentiment%20Analysis%20with%20Logistic%20Regression.html\r\n\r\nHowever, it is still not clear to me what is the best way to input the text. \r\nIt seems like with the notebook approach we lose the position of the words. The solution in https://github.com/slundberg/shap/issues/40 was to append the position to the word, but this seems to _lose the importance of a single word_ (which I don't fully understand but I guess it may come from the change in the reference value?). The alternative would be using a 1-hot vector, but it's not clear how to input it. Blindly trying to input a 1-hot vector would raise the following error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"explain_one_hot.py\", line 140, in <module>\r\n    shap_values = explainer.shap_values(x_batch_one_hot, nsamples=num_samples)\r\n  File \"/home/anaconda2/envs/py27/lib/python2.7/site-packages/shap/explainers/kernel.py\", line 179, in shap_values\r\n    assert len(X.shape) == 1 or len(X.shape) == 2, \"Instance must have 1 or 2 dimensions!\"\r\nAssertionError: Instance must have 1 or 2 dimensions!\r\n```\r\n\r\n@slundberg also mentioned the DeepExplainer (that is now implemented) as a way to deal with all of the above. If that's the case, does anyone have a notebook on how to use it on text?\r\n\r\nThanks,\r\nOana",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/486/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/486/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
