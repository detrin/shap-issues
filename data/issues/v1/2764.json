{
  "url": "https://api.github.com/repos/shap/shap/issues/2764",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/2764/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/2764/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/2764/events",
  "html_url": "https://github.com/shap/shap/issues/2764",
  "id": 1447957749,
  "node_id": "I_kwDOBHDcK85WThT1",
  "number": 2764,
  "title": "'utf-8' codec can't decode byte 0xff in position 336: invalid start byte",
  "user": {
    "login": "SrikanthPusarla",
    "id": 39696849,
    "node_id": "MDQ6VXNlcjM5Njk2ODQ5",
    "avatar_url": "https://avatars.githubusercontent.com/u/39696849?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SrikanthPusarla",
    "html_url": "https://github.com/SrikanthPusarla",
    "followers_url": "https://api.github.com/users/SrikanthPusarla/followers",
    "following_url": "https://api.github.com/users/SrikanthPusarla/following{/other_user}",
    "gists_url": "https://api.github.com/users/SrikanthPusarla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SrikanthPusarla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SrikanthPusarla/subscriptions",
    "organizations_url": "https://api.github.com/users/SrikanthPusarla/orgs",
    "repos_url": "https://api.github.com/users/SrikanthPusarla/repos",
    "events_url": "https://api.github.com/users/SrikanthPusarla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SrikanthPusarla/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2022-11-14T12:16:18Z",
  "updated_at": "2022-11-14T12:23:34Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I am not able to load my Xgboost booster object into shap.TreeExplainer which is throwing error:  'utf-8' codec can't decode byte 0xff in position 336: invalid start byte.\r\n\r\nBut where as it is working good for the example provided at https://shap.readthedocs.io/en/latest/example_notebooks/tabular_examples/tree_based_models/Basic%20SHAP%20Interaction%20Value%20Example%20in%20XGBoost.html,\r\n\r\nit seems shap.TreeExplainer is not working on booster build based on my parameters.\r\n\r\nMy code for training booster is below:\r\n\r\nimport xgboost as xgb\r\nimport shap\r\ntrain = xgb.DMatrix(data=X_train, label=y_train, weight=Weights)\r\nym  = y_train.mean()\r\nspw  = (ym / (1 - ym)) if (ym > (1 - ym)) else ((1 - ym) / ym)\r\nMODEL_PARAMETERS = {\r\n        'base_score':       ym,                'booster':             'gbtree', 'colsample_bylevel':       1,    \r\n        'colsample_bynode': 1,                 'colsample_bytree':    0.5,      'gamma':                   0,    \r\n        'gpu_id':           -1,                'importance_type':     'gain',   'interaction_constraints': '',   \r\n        'learning_rate':    0.1,               'max_delta_step':      0,        'max_depth':               28,   \r\n        'min_child_weight': 1,                 'missing':             np.nan,   'monotone_constraints':    '()', \r\n        'n_estimators':     164,               'n_jobs':              20,       'num_parallel_tree':       1,    \r\n        'objective':        'binary:logistic', 'random_state':        0,        'reg_alpha':               0.0,  \r\n        'reg_lambda':       0.00075,           'scale_pos_weight':    spw,      'subsample':               0.8,  \r\n        'tree_method':      'approx',          'validate_parameters': 1,        'verbosity':               0     \r\n        }\r\n \r\n    booster = xgb.train(\r\n      params=MODEL_PARAMETERS,\r\n      dtrain=train,\r\n      num_boost_round=NUM_BOOST_ROUNDS,\r\n      evals=[(validation, \"validation\")], \r\n      early_stopping_rounds=EARLY_STOPPING_ROUNDS,\r\n    )\r\n\r\nexplainer = shap.TreeExplainer(booster)\r\n\r\n\r\nPython Environment:\r\nxgboost: 1.5.2\r\nshap: 0.40.0",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/2764/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/2764/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
