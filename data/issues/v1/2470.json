{
  "url": "https://api.github.com/repos/shap/shap/issues/2470",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/2470/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/2470/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/2470/events",
  "html_url": "https://github.com/shap/shap/issues/2470",
  "id": 1187649417,
  "node_id": "I_kwDOBHDcK85GyheJ",
  "number": 2470,
  "title": "Question - why SHAP expected value is 0.5 always for my data?",
  "user": {
    "login": "SSMK-wq",
    "id": 30723825,
    "node_id": "MDQ6VXNlcjMwNzIzODI1",
    "avatar_url": "https://avatars.githubusercontent.com/u/30723825?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SSMK-wq",
    "html_url": "https://github.com/SSMK-wq",
    "followers_url": "https://api.github.com/users/SSMK-wq/followers",
    "following_url": "https://api.github.com/users/SSMK-wq/following{/other_user}",
    "gists_url": "https://api.github.com/users/SSMK-wq/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SSMK-wq/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SSMK-wq/subscriptions",
    "organizations_url": "https://api.github.com/users/SSMK-wq/orgs",
    "repos_url": "https://api.github.com/users/SSMK-wq/repos",
    "events_url": "https://api.github.com/users/SSMK-wq/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SSMK-wq/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2022-03-31T07:39:49Z",
  "updated_at": "2022-03-31T09:34:09Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I am working on a **binary classification** using random forest model, neural networks in which am using SHAP to explain the model predictions. I followed the tutorial and wrote the below code to get the waterfall plot shown below. My dataset shape is 977,6 and 77:23 is class proportion\r\n\r\n    row_to_show = 20\r\n    data_for_prediction = ord_test_t.iloc[row_to_show]  # use 1 row of data here. Could use multiple rows if desired\r\n    data_for_prediction_array = data_for_prediction.values.reshape(1, -1)\r\n    rf_boruta.predict_proba(data_for_prediction_array)\r\n    explainer = shap.TreeExplainer(rf_boruta)\r\n    # Calculate Shap values\r\n    shap_values = explainer.shap_values(data_for_prediction)\r\n    shap.plots._waterfall.waterfall_legacy(explainer.expected_value[0], shap_values[0],ord_test_t.iloc[row_to_show])\r\n\r\n\r\nWhen I did `explainer.model_output`, it gives `raw` as output\r\nThis generated the plot as shown below\r\n\r\n![image](https://user-images.githubusercontent.com/30723825/161003033-b96b3e81-c253-43c5-80df-3f467d6034cd.png)\r\n\r\n\r\nBut one thing that I realized was that **for all row indices my SHAP base value is 0.5**. Do you know what does that mean? Is this waterfall plot specific or data specific? My feature contribution adds on top of 0.5. sometimes my feature contribution takes it to 0.80 or sometimes, it ends up at 0.20 (substracts from 0.5). \r\n\r\nPlease note that this question is not code related question. Instead, I would like to know why does SHAP base value is always 0.5 in my waterfall plot for a binary classification problem? Why cna't the base value be 0.2, 0.3 etc?\r\n\r\n  [1]: https://i.stack.imgur.com/rFXlA.png",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/2470/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/2470/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
