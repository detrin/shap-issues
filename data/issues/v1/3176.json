{
  "url": "https://api.github.com/repos/shap/shap/issues/3176",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/3176/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/3176/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/3176/events",
  "html_url": "https://github.com/shap/shap/issues/3176",
  "id": 1832671979,
  "node_id": "I_kwDOBHDcK85tPFrr",
  "number": 3176,
  "title": "BUG: Strange error while describing the TreeExplainer for catboost",
  "user": {
    "login": "rakshitrao99",
    "id": 61894970,
    "node_id": "MDQ6VXNlcjYxODk0OTcw",
    "avatar_url": "https://avatars.githubusercontent.com/u/61894970?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rakshitrao99",
    "html_url": "https://github.com/rakshitrao99",
    "followers_url": "https://api.github.com/users/rakshitrao99/followers",
    "following_url": "https://api.github.com/users/rakshitrao99/following{/other_user}",
    "gists_url": "https://api.github.com/users/rakshitrao99/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rakshitrao99/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rakshitrao99/subscriptions",
    "organizations_url": "https://api.github.com/users/rakshitrao99/orgs",
    "repos_url": "https://api.github.com/users/rakshitrao99/repos",
    "events_url": "https://api.github.com/users/rakshitrao99/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rakshitrao99/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 486901329,
      "node_id": "MDU6TGFiZWw0ODY5MDEzMjk=",
      "url": "https://api.github.com/repos/shap/shap/labels/bug",
      "name": "bug",
      "color": "ee0701",
      "default": true,
      "description": "Indicates an unexpected problem or unintended behaviour"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-08-02T08:14:25Z",
  "updated_at": "2023-08-07T22:13:01Z",
  "closed_at": "2023-08-07T22:13:01Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Issue Description\n\nI'm running a ml model, but I keep getting this error: \r\n\r\n> AttributeError: module 'numpy' has no attribute 'bool'.\r\n`np.bool` was a deprecated alias for the builtin `bool`. To avoid this error in existing code, use `bool` by itself. Doing this will not modify any behavior and is safe. If you specifically wanted the numpy scalar type, use `np.bool_` here.\r\nThe aliases was originally deprecated in NumPy 1.20; for more details and guidance see the original release note at:\r\n\r\nI have checked the version of shap and numpy as well: The version are as follows: \r\n('0.41.0', '1.24.3')\n\n### Minimal Reproducible Example\n\n```python\nimport shap\r\nnum_cols is a list of numerical columns and cat_cols is a list of categorical columns\r\ncatb is a catboost model object:\r\n%%time\r\ncatb = CatBoostClassifier(iterations=100, random_seed=42, learning_rate=0.5)\r\ncatb.fit(df_train_data[num_cols+cat_cols], df_train_data[['liability_ind']] , cat_features=cat_cols, verbose=True)\r\n\r\nexplainerModel_prob = shap.TreeExplainer(catb, \r\n                                         data = shap.sample(df_train_data[num_cols+cat_cols], 1000), \r\n                                         model_output='probability')\n```\n\n\n### Expected Behavior\n\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\nCell In[148], line 1\r\n----> 1 explainerModel_prob = shap.TreeExplainer(catb, data = shap.sample(df_train_data[num_cols+cat_cols], 1000), model_output='probability')\r\n\r\nFile ~\\.conda\\envs\\myenv\\Lib\\site-packages\\shap\\explainers\\_tree.py:101, in Tree.__init__(self, model, data, model_output, feature_perturbation, feature_names, approximate, **deprecated_options)\r\n     98     self.data_feature_names = list(data.columns)\r\n    100 masker = data\r\n--> 101 super(Tree, self).__init__(model, masker, feature_names=feature_names)\r\n    103 if type(self.masker) is maskers.Independent:\r\n    104     data = self.masker.data\r\n\r\nFile ~\\.conda\\envs\\myenv\\Lib\\site-packages\\shap\\explainers\\_explainer.py:88, in Explainer.__init__(self, model, masker, link, algorithm, output_names, feature_names, linearize_link, seed, **kwargs)\r\n     86         self.masker = maskers.Partition(masker)\r\n     87     else:\r\n---> 88         self.masker = maskers.Independent(masker)\r\n     89 elif safe_isinstance(masker, [\"transformers.PreTrainedTokenizer\", \"transformers.tokenization_utils_base.PreTrainedTokenizerBase\"]):\r\n     90     if is_transformers_lm(self.model):\r\n     91         # auto assign text infilling if model is a transformer model with lm head\r\n\r\nFile ~\\.conda\\envs\\myenv\\Lib\\site-packages\\shap\\maskers\\_tabular.py:262, in Independent.__init__(self, data, max_samples)\r\n    247 def __init__(self, data, max_samples=100):\r\n    248     \"\"\" Build a Independent masker with the given background data.\r\n    249 \r\n    250     Parameters\r\n   (...)\r\n    260         about 1, 10, 100, or 1000 background samples are reasonable choices.\r\n    261     \"\"\"\r\n--> 262     super().__init__(data, max_samples=max_samples, clustering=None)\r\n\r\nFile ~\\.conda\\envs\\myenv\\Lib\\site-packages\\shap\\maskers\\_tabular.py:82, in Tabular.__init__(self, data, max_samples, clustering)\r\n     80 # self._last_mask = np.zeros(self.data.shape[1], dtype=np.bool)\r\n     81 self._masked_data = data.copy()\r\n---> 82 self._last_mask = np.zeros(data.shape[1], dtype=np.bool)\r\n     83 self.shape = self.data.shape\r\n     84 self.supports_delta_masking = True\r\n\r\nFile ~\\.conda\\envs\\myenv\\Lib\\site-packages\\numpy\\__init__.py:305, in __getattr__(attr)\r\n    300     warnings.warn(\r\n    301         f\"In the future `np.{attr}` will be defined as the \"\r\n    302         \"corresponding NumPy scalar.\", FutureWarning, stacklevel=2)\r\n    304 if attr in __former_attrs__:\r\n--> 305     raise AttributeError(__former_attrs__[attr])\r\n    307 # Importing Tester requires importing all of UnitTest which is not a\r\n    308 # cheap import Since it is mainly used in test suits, we lazy import it\r\n    309 # here to save on the order of 10 ms of import time for most users\r\n    310 #\r\n    311 # The previous way Tester was imported also had a side effect of adding\r\n    312 # the full `numpy.testing` namespace\r\n    313 if attr == 'testing':\r\n\r\nAttributeError: module 'numpy' has no attribute 'bool'.\r\n`np.bool` was a deprecated alias for the builtin `bool`. To avoid this error in existing code, use `bool` by itself. Doing this will not modify any behavior and is safe. If you specifically wanted the numpy scalar type, use `np.bool_` here.\r\nThe aliases was originally deprecated in NumPy 1.20; for more details and guidance see the original release note at:\n\n### Bug report checklist\n\n- [X] I have checked that this issue has not already been reported.\n- [X] I have confirmed this bug exists on the [latest release](https://github.com/shap/shap/releases) of shap.\n- [X] I have confirmed this bug exists on the [master branch](https://github.com/shap/shap/blob/master/CONTRIBUTING.md#installing-from-the-master-branch) of shap.\n- [ ] I'd be interested in making a PR to fix this bug\n\n### Installed Versions\n\n0.41.0",
  "closed_by": {
    "login": "connortann",
    "id": 71127464,
    "node_id": "MDQ6VXNlcjcxMTI3NDY0",
    "avatar_url": "https://avatars.githubusercontent.com/u/71127464?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/connortann",
    "html_url": "https://github.com/connortann",
    "followers_url": "https://api.github.com/users/connortann/followers",
    "following_url": "https://api.github.com/users/connortann/following{/other_user}",
    "gists_url": "https://api.github.com/users/connortann/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/connortann/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/connortann/subscriptions",
    "organizations_url": "https://api.github.com/users/connortann/orgs",
    "repos_url": "https://api.github.com/users/connortann/repos",
    "events_url": "https://api.github.com/users/connortann/events{/privacy}",
    "received_events_url": "https://api.github.com/users/connortann/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/3176/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/3176/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
