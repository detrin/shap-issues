{
  "url": "https://api.github.com/repos/shap/shap/issues/501",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/501/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/501/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/501/events",
  "html_url": "https://github.com/shap/shap/issues/501",
  "id": 423676657,
  "node_id": "MDU6SXNzdWU0MjM2NzY2NTc=",
  "number": 501,
  "title": "Summary plot of SHAP interaction values ordered by feature importance",
  "user": {
    "login": "samy101",
    "id": 1528106,
    "node_id": "MDQ6VXNlcjE1MjgxMDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1528106?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/samy101",
    "html_url": "https://github.com/samy101",
    "followers_url": "https://api.github.com/users/samy101/followers",
    "following_url": "https://api.github.com/users/samy101/following{/other_user}",
    "gists_url": "https://api.github.com/users/samy101/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/samy101/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/samy101/subscriptions",
    "organizations_url": "https://api.github.com/users/samy101/orgs",
    "repos_url": "https://api.github.com/users/samy101/repos",
    "events_url": "https://api.github.com/users/samy101/events{/privacy}",
    "received_events_url": "https://api.github.com/users/samy101/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-03-21T11:09:03Z",
  "updated_at": "2019-06-26T15:34:53Z",
  "closed_at": "2019-06-26T15:33:47Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I got the SHAP interaction values, using TreeExplainer for a xgboost model, and able to plot them using summary_plot. \r\n```\r\nshap_interaction_values = treeExplainer.shap_interaction_values(x1)\r\nshap.summary_plot(shap_interaction_values, features=x1, max_display=4)\r\n```\r\n![image](https://user-images.githubusercontent.com/1528106/54739079-b48f4300-4bf1-11e9-9917-839a56e83af6.png)\r\n\r\nIs thera an option in the `summary_plot` to plot the shap interaction values one per row, similar to the summary plot for ordinary shap values? In the current plot, it is difficult to understand the order of the most important features (both main and interaction effects). \r\n\r\nMy try is\r\n```\r\ndim = shap_interaction_values.shape\r\nshap_interaction_values_2d = np.reshape(np.ravel(shap_interaction_values), (dim[0], dim[1]*dim[2]))\r\n\r\n# make all pairs of features\r\nx2 = x1[np.repeat(x1.columns.tolist(), len(x1.columns))]\r\nx2.columns =  [i+\":\"+str(j) for i in x1.columns for j in x1.columns]\r\n\r\nshap.summary_plot(shap_interaction_values_2d, x2, sort=True)\r\n```\r\n![image](https://user-images.githubusercontent.com/1528106/54747976-4c4d5b00-4c0b-11e9-88b0-3df50c4e8ca6.png)\r\n\r\nAm I doing everything correct? Can I conclude that the most important interact effect is F0:F3 after the main effects of F3, F2, F0 and F1?\r\n",
  "closed_by": {
    "login": "slundberg",
    "id": 3740613,
    "node_id": "MDQ6VXNlcjM3NDA2MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3740613?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/slundberg",
    "html_url": "https://github.com/slundberg",
    "followers_url": "https://api.github.com/users/slundberg/followers",
    "following_url": "https://api.github.com/users/slundberg/following{/other_user}",
    "gists_url": "https://api.github.com/users/slundberg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/slundberg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/slundberg/subscriptions",
    "organizations_url": "https://api.github.com/users/slundberg/orgs",
    "repos_url": "https://api.github.com/users/slundberg/repos",
    "events_url": "https://api.github.com/users/slundberg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/slundberg/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/501/reactions",
    "total_count": 3,
    "+1": 3,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/501/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
