{
  "url": "https://api.github.com/repos/shap/shap/issues/1160",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/1160/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/1160/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/1160/events",
  "html_url": "https://github.com/shap/shap/issues/1160",
  "id": 601234136,
  "node_id": "MDU6SXNzdWU2MDEyMzQxMzY=",
  "number": 1160,
  "title": "tensorflow.estimator is not currently a supported model type!/ .MetaGraphDef'> is not currently a supported model type!",
  "user": {
    "login": "niloofardadras",
    "id": 15331846,
    "node_id": "MDQ6VXNlcjE1MzMxODQ2",
    "avatar_url": "https://avatars.githubusercontent.com/u/15331846?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/niloofardadras",
    "html_url": "https://github.com/niloofardadras",
    "followers_url": "https://api.github.com/users/niloofardadras/followers",
    "following_url": "https://api.github.com/users/niloofardadras/following{/other_user}",
    "gists_url": "https://api.github.com/users/niloofardadras/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/niloofardadras/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/niloofardadras/subscriptions",
    "organizations_url": "https://api.github.com/users/niloofardadras/orgs",
    "repos_url": "https://api.github.com/users/niloofardadras/repos",
    "events_url": "https://api.github.com/users/niloofardadras/events{/privacy}",
    "received_events_url": "https://api.github.com/users/niloofardadras/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2020-04-16T16:37:53Z",
  "updated_at": "2020-04-23T02:05:36Z",
  "closed_at": "2020-04-23T02:05:36Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi,\r\nAfter Trying to solve this issue for days i have decided to post. \r\nI am using tensorflow estimator API to train my model. However I am getting multiple issues trying to use shap to explain feature importance of my model. I am using anaconda environment python 3.6\r\n\r\n1. my inputs are dataframes\r\n2. I have a model function which i train the model with tf.estimator.EstimatorSpec\r\n3 my nn is created as bellow\r\nnn = tf.estimator.Estimator(\r\n                model_fn=model_fn,\r\n                params=model_params,\r\n                config=trainingConfig\r\n        )\r\n4. nn.train is deployed.\r\n\r\n5.to get shap values:\r\n            e = shap.DeepExplainer(nn,x_train.loc[1:100,:])\r\n            shap_values = e.shap_values(x_test.loc[10,:])\r\n\r\n\r\nhere is the error I am getting \r\n\"ERROR - Read sys.argv: Traceback (most recent call last):\r\n  File \"C:/Users/nhossein/PycharmProjects/ShapExplain/run_experiments.py\", line 217, in main\r\n    df=train_model_with_validation_and_confidence.train(parameters, Dataa, my_labb,count)\r\n  File \"C:\\Users\\nhossein\\PycharmProjects\\ShapExplain\\train_model_with_validation_and_confidence.py\", line 437, in train\r\n    e = shap.DeepExplainer(nn,x_train.loc[1:100,:])\r\n  File \"C:\\Anaconda3\\envs\\AzureEvn\\lib\\site-packages\\shap\\explainers\\deep\\__init__.py\", line 80, in __init__\r\n    self.explainer = TFDeepExplainer(model, data, session, learning_phase_flags)\r\n  File \"C:\\Anaconda3\\envs\\AzureEvn\\lib\\site-packages\\shap\\explainers\\deep\\deep_tf.py\", line 92, in __init__\r\n    assert False, str(type(model)) + \" is not currently a supported model type!\"\r\nAssertionError: <class 'tensorflow_estimator.python.estimator.estimator.Estimator'> is not currently a supported model type!\"\r\n\r\nalso I have tries using the created model meta and index files and it gives error that estimator graph is not currently supported",
  "closed_by": {
    "login": "niloofardadras",
    "id": 15331846,
    "node_id": "MDQ6VXNlcjE1MzMxODQ2",
    "avatar_url": "https://avatars.githubusercontent.com/u/15331846?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/niloofardadras",
    "html_url": "https://github.com/niloofardadras",
    "followers_url": "https://api.github.com/users/niloofardadras/followers",
    "following_url": "https://api.github.com/users/niloofardadras/following{/other_user}",
    "gists_url": "https://api.github.com/users/niloofardadras/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/niloofardadras/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/niloofardadras/subscriptions",
    "organizations_url": "https://api.github.com/users/niloofardadras/orgs",
    "repos_url": "https://api.github.com/users/niloofardadras/repos",
    "events_url": "https://api.github.com/users/niloofardadras/events{/privacy}",
    "received_events_url": "https://api.github.com/users/niloofardadras/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/1160/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/1160/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
