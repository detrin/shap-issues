{
  "url": "https://api.github.com/repos/shap/shap/issues/2270",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/2270/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/2270/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/2270/events",
  "html_url": "https://github.com/shap/shap/issues/2270",
  "id": 1055843081,
  "node_id": "I_kwDOBHDcK84-7uMJ",
  "number": 2270,
  "title": "How to interpret force_plot output of encoded categorical variables?",
  "user": {
    "login": "tipa84111",
    "id": 94522262,
    "node_id": "U_kgDOBaJLlg",
    "avatar_url": "https://avatars.githubusercontent.com/u/94522262?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tipa84111",
    "html_url": "https://github.com/tipa84111",
    "followers_url": "https://api.github.com/users/tipa84111/followers",
    "following_url": "https://api.github.com/users/tipa84111/following{/other_user}",
    "gists_url": "https://api.github.com/users/tipa84111/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tipa84111/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tipa84111/subscriptions",
    "organizations_url": "https://api.github.com/users/tipa84111/orgs",
    "repos_url": "https://api.github.com/users/tipa84111/repos",
    "events_url": "https://api.github.com/users/tipa84111/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tipa84111/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2021-11-17T08:24:32Z",
  "updated_at": "2021-11-17T09:00:25Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "@slundberg Hi Scott,\r\nThank you so much for establishing Shap and the great support you have been providing for the community. I wanted to see how you recommend interpreting the output of a forceplot for example which shows encoded variables. As a general example: If we see Gender_female=0 has a contribution margin of X and Gender_male=1 has a contribution margin of y, how would I read this as its the inverse? I read something about summing but I was not sure exactly what that would entail.\r\n\r\nBelow is specific example where you see this pattern with account_id (which is even more odd as in this instance the customer was ID=12 and 13 at the same time but maybe thats a binary encoding issue). Let's assume the gender example is the better example.\r\n\r\nLet me know what you think, Thanks a ton!\r\n<img width=\"1103\" alt=\"Screen Shot 2021-11-17 at 12 22 38 AM\" src=\"https://user-images.githubusercontent.com/94522262/142162480-060c05b3-7f9d-41fc-aabc-1c6c2f0368a3.png\">\r\n\r\n\r\nCode\r\n```\r\nX_train, X_test, y_train, y_test = train_test_split(X,y, test_size=0.2, random_state=42, stratify=y_closed)\r\n    \r\n#binary encoding for cat vars in X_train\r\n    import category_encoders as ce\r\n    object_col = X_train.select_dtypes(['object']).columns\r\n    encoder = ce.BinaryEncoder(cols = object_col) \r\n    df_enc = encoder.fit_transform(X_train)\r\n    df_enc.columns = encoder.get_feature_names()\r\n    \r\n    X_train.drop(object_col, axis = 1, inplace = True)\r\n    X_train_enc = pd.concat([X_train, df_enc], axis = 1)\r\n    X_train_enc.head()\r\n    print(X_train_enc.shape)\r\n    \r\n    #shap\r\n    import shap\r\n    %matplotlib inline\r\n    shap.initjs()\r\n    \r\n    model = XGBClassifier(use_label_encoder=False)\r\n    X, y = X_train_enc, y_train\r\n    \r\n    model.fit(X,y)\r\n    explainer = shap.TreeExplainer(model,data = X,model_output='probability') \r\n    shap_values = explainer.shap_values(X) \r\n\r\ni=2\r\nshap.force_plot(explainer.expected_value, shap_values[i], features=X_train[i])\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/2270/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/2270/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
