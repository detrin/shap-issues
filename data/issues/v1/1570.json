{
  "url": "https://api.github.com/repos/shap/shap/issues/1570",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/1570/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/1570/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/1570/events",
  "html_url": "https://github.com/shap/shap/issues/1570",
  "id": 738452181,
  "node_id": "MDU6SXNzdWU3Mzg0NTIxODE=",
  "number": 1570,
  "title": "Error using DeepExplainer with a keras model when data type is a sequence",
  "user": {
    "login": "ReginaBDuarte",
    "id": 56218681,
    "node_id": "MDQ6VXNlcjU2MjE4Njgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/56218681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ReginaBDuarte",
    "html_url": "https://github.com/ReginaBDuarte",
    "followers_url": "https://api.github.com/users/ReginaBDuarte/followers",
    "following_url": "https://api.github.com/users/ReginaBDuarte/following{/other_user}",
    "gists_url": "https://api.github.com/users/ReginaBDuarte/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ReginaBDuarte/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ReginaBDuarte/subscriptions",
    "organizations_url": "https://api.github.com/users/ReginaBDuarte/orgs",
    "repos_url": "https://api.github.com/users/ReginaBDuarte/repos",
    "events_url": "https://api.github.com/users/ReginaBDuarte/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ReginaBDuarte/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2020-11-08T12:13:16Z",
  "updated_at": "2020-11-08T12:13:16Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I was trying to use SHAP to explain a link prediction model from stellargraph package (package for GNN models) and obtained an error due to the type of object of the data. \r\n\r\nThe stellargraph uses internally keras for implementing their models and creates an object similar to tf.keras.utils.sequence to encapsulate the input data. \r\n\r\nI was using the model of the demo from stellargraph for GraphSage link prediction. The demo could be found here: https://colab.research.google.com/github/stellargraph/stellargraph/blob/master/demos/link-prediction/graphsage-link-prediction.ipynb\r\n\r\n In the following images are presented parts of the code where is shown the creation of the model and the type of object of the input data:\r\n\r\n![compile](https://user-images.githubusercontent.com/56218681/98463354-943f3e00-21b2-11eb-8ebc-efb246b35268.PNG)\r\n\r\n![fit](https://user-images.githubusercontent.com/56218681/98463359-9bfee280-21b2-11eb-9d3f-5c160410c985.PNG)\r\n\r\n![type](https://user-images.githubusercontent.com/56218681/98463363-a325f080-21b2-11eb-8a5c-2416af6c62de.PNG)\r\n\r\nWhen I tried to run the shap, got this error:\r\n\r\n![error](https://user-images.githubusercontent.com/56218681/98463548-c309e400-21b3-11eb-982d-2d18005a67b5.PNG)\r\n\r\nIn the documentation for TensorFlow models, the deepexplainer only accepts numpy arrays or  pandas dataframes for types of data. With this restriction, the keras models that can be explained with shap are limited since the type of objects supported for the input of a keras model are more than numpy arrays.  One example is the tf.keras.utils.sequence that is very similar to the object stellargraph.mapper.sequences.LinkSequence in terms of methods. \r\n\r\nCould you integrate this type of objects in the implementation of deepExplainer?\r\n\r\nThank you",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/1570/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/1570/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
