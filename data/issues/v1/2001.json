{
  "url": "https://api.github.com/repos/shap/shap/issues/2001",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/2001/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/2001/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/2001/events",
  "html_url": "https://github.com/shap/shap/issues/2001",
  "id": 894700282,
  "node_id": "MDU6SXNzdWU4OTQ3MDAyODI=",
  "number": 2001,
  "title": "Errors when running the notebook for \"Be Careful When Interpreting Predictive Models in Search of Causal Insights\"",
  "user": {
    "login": "ajsExodus",
    "id": 66268464,
    "node_id": "MDQ6VXNlcjY2MjY4NDY0",
    "avatar_url": "https://avatars.githubusercontent.com/u/66268464?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsExodus",
    "html_url": "https://github.com/ajsExodus",
    "followers_url": "https://api.github.com/users/ajsExodus/followers",
    "following_url": "https://api.github.com/users/ajsExodus/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsExodus/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsExodus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsExodus/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsExodus/orgs",
    "repos_url": "https://api.github.com/users/ajsExodus/repos",
    "events_url": "https://api.github.com/users/ajsExodus/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsExodus/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-05-18T19:20:44Z",
  "updated_at": "2021-09-23T09:24:58Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi!\r\n[I also posted this question on the Towards Data Science article]\r\n\r\nI have used SHAP before, but when tried to execute the notebook the article points to (*), I got errors when trying to run `shap.utils.hclust(...)` and `shap.plots.scatter(...)`. Is there a way to find a workaround for these? \r\n\r\nThose particular plots are very useful and I would like to use them for my analyses. \r\n\r\nAlso, I was not able to get the `shap.plots.force` plot shown in [https://github.com/slundberg/shap] \r\n\r\nI appreciate your time and help! (See below).\r\n\r\n  -AJ\r\n\r\n(*) [https://towardsdatascience.com/be-careful-when-interpreting-predictive-models-in-search-of-causal-insights-e68626e664b6)]\r\n\r\n----------------------------------------------------------------------------------------------------------------------------------------------------\r\n`clust = shap.utils.hclust(X, y, linkage=\"single\")`\r\n\r\n`Exception                                 Traceback (most recent call last)\r\n<ipython-input-3-af0ff76bee89> in <module>\r\n      4 shap_values = explainer(X)\r\n      5 \r\n----> 6 clust = shap.utils.hclust(X, y, linkage=\"single\")\r\n      7 shap.plots.bar(shap_values, clustering=clust, clustering_cutoff=1)\r\n\r\n~/anaconda3/lib/python3.7/site-packages/shap/utils/_clustering.py in hclust(X, y, linkage, metric, random_state)\r\n    175         return sp.cluster.hierarchy.complete(dist)\r\n    176     else:\r\n--> 177         raise Exception(\"Unknown linkage: \" + str(linkage))\r\n\r\nException: Unknown linkage: single`\r\n\r\n----------------------------------------------------------------------------------------------------------------------------------------------------\r\n`shap.plots.scatter(shap_values, ylabel=\"SHAP value\\n(higher means more likely to renew)\")`\r\n\r\n\r\n`TypeError                                 Traceback (most recent call last)\r\n<ipython-input-4-0af081ed1a92> in <module>\r\n----> 1 shap.plots.scatter(shap_values, ylabel=\"SHAP value\\n(higher means more likely to renew)\")\r\n\r\nTypeError: scatter() got an unexpected keyword argument 'ylabel'`\r\n\r\n----------------------------------------------------------------------------------------------------------------------------------------------------\r\nNOTE: I am using the code in [https://github.com/slundberg/shap] \r\n\r\nI am able to see the waterfall plot, and the `shap.plots.force(...)` plots, but not the one below ...\r\n\r\n`shap.force_plot(explainer.expected_value[0], shap_values[0])`\r\n\r\nAs suggested by ...\r\n\r\n`Exception: In v0.20 force_plot now requires the base value as the first parameter! Try shap.force_plot(explainer.expected_value, shap_values) or for multi-output models try shap.force_plot(explainer.expected_value[0], shap_values[0]).`\r\n\r\nGot ...\r\n\r\n`IndexError                                Traceback (most recent call last)\r\n<ipython-input-8-0bddc6dd5d92> in <module>\r\n      2 \r\n      3 # shap.plots.force(shap_values)\r\n----> 4 shap.force_plot(explainer.expected_value[0], shap_values[0])\r\n\r\nIndexError: invalid index to scalar variable.`",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/2001/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/2001/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
