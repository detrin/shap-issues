{
  "url": "https://api.github.com/repos/shap/shap/issues/576",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/576/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/576/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/576/events",
  "html_url": "https://github.com/shap/shap/issues/576",
  "id": 440943893,
  "node_id": "MDU6SXNzdWU0NDA5NDM4OTM=",
  "number": 576,
  "title": "Binary CatBoost classifier using TreeExplainer with model_output='probability' and tree_dependence='Independent'",
  "user": {
    "login": "jayantsahewal",
    "id": 7027650,
    "node_id": "MDQ6VXNlcjcwMjc2NTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7027650?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jayantsahewal",
    "html_url": "https://github.com/jayantsahewal",
    "followers_url": "https://api.github.com/users/jayantsahewal/followers",
    "following_url": "https://api.github.com/users/jayantsahewal/following{/other_user}",
    "gists_url": "https://api.github.com/users/jayantsahewal/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jayantsahewal/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jayantsahewal/subscriptions",
    "organizations_url": "https://api.github.com/users/jayantsahewal/orgs",
    "repos_url": "https://api.github.com/users/jayantsahewal/repos",
    "events_url": "https://api.github.com/users/jayantsahewal/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jayantsahewal/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-05-06T23:22:00Z",
  "updated_at": "2019-05-12T01:10:40Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I know there are similar issues already which talk about multi-class and/or not using feature_dependence='Independent'. I put a comment in one of the issues as well but that has been tagged with label \"To Do\". I wasn't sure whether someone will be looking at that issue or not. So, I thought of creating an issue here since it's slightly different.\r\n\r\nIn my case, I am getting the same issue even with a binary CatBoost classifier. Based on the code base, it looks like if model output is not margin and feature_dependence is set to \"Independent\" even then it will always throw an error because objective attribute for CatBoost classifiers hasn't been defined and it will always remain None. Is it possible to make it work for at least binary CatBoost classifiers?\r\n\r\n```\r\nif model_output != \"margin\":\r\n    if self.model.objective is None and self.model.tree_output is None:\r\n        raise Exception(\"Model does have a known objective or output type! When model_output is \" \\\r\n\"not \\\"margin\\\" then we need to know the model's objective or link function.\")\r\n\r\n\r\nelif str(type(model)).endswith(\"catboost.core.CatBoostClassifier'>\"):\r\n    assert_import(\"catboost\")\r\n    self.model_type = \"catboost\"\r\n    self.original_model = model\r\n```\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/576/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/576/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
