{
  "url": "https://api.github.com/repos/shap/shap/issues/1822",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/1822/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/1822/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/1822/events",
  "html_url": "https://github.com/shap/shap/issues/1822",
  "id": 808607402,
  "node_id": "MDU6SXNzdWU4MDg2MDc0MDI=",
  "number": 1822,
  "title": "Shap for LSTM binary classification model in Keras",
  "user": {
    "login": "maleeham",
    "id": 42660845,
    "node_id": "MDQ6VXNlcjQyNjYwODQ1",
    "avatar_url": "https://avatars.githubusercontent.com/u/42660845?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/maleeham",
    "html_url": "https://github.com/maleeham",
    "followers_url": "https://api.github.com/users/maleeham/followers",
    "following_url": "https://api.github.com/users/maleeham/following{/other_user}",
    "gists_url": "https://api.github.com/users/maleeham/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/maleeham/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/maleeham/subscriptions",
    "organizations_url": "https://api.github.com/users/maleeham/orgs",
    "repos_url": "https://api.github.com/users/maleeham/repos",
    "events_url": "https://api.github.com/users/maleeham/events{/privacy}",
    "received_events_url": "https://api.github.com/users/maleeham/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-02-15T14:59:46Z",
  "updated_at": "2021-02-25T11:47:38Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "1. Get this error on creating the explainer object. Tried initializing all variables (global + local) and start the TensorFlow session but the error won't go away. \r\n```\r\nFailedPreconditionError: Attempting to use uninitialized value lstm_2/bias\r\n\t [[{{node lstm_2/bias/read}}]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nFailedPreconditionError                   Traceback (most recent call last)\r\n<ipython-input-59-7b52ea7cacf7> in <module>\r\n      2 \r\n      3 # we use the first 100 training examples as our background dataset to integrate over\r\n----> 4 explainer = shap.DeepExplainer(model, X_train2[:100])\r\n\r\n```\r\n\r\n2. Running the same thing on Google colab throws a version issue. \r\n```\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-5-9e7c1776c6c9> in <module>()\r\n      6 \r\n      7 # explain predictions of the model on three images\r\n----> 8 e = shap.DeepExplainer(model, background)\r\n      9 # ...or pass tensors directly\r\n     10 # e = shap.DeepExplainer((model.layers[0].input, model.layers[-1].output), background)\r\n\r\n2 frames\r\n/usr/local/lib/python3.6/dist-packages/shap/explainers/tf_utils.py in _get_graph(explainer)\r\n     44         return explainer.session.graph\r\n     45     else:\r\n---> 46         return explainer.model_output.graph\r\n     47 \r\n     48 def _get_model_inputs(model):\r\n\r\nAttributeError: 'KerasTensor' object has no attribute 'graph'\r\n```\r\n\r\nWhat version(s) of _Tensorflow/ Keras_ should be used? Are there any specific installation requirements that are causing the issue? \r\nGreatly appreciate any help here. ",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/1822/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/1822/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
