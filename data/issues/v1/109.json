{
  "url": "https://api.github.com/repos/shap/shap/issues/109",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/109/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/109/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/109/events",
  "html_url": "https://github.com/shap/shap/issues/109",
  "id": 329848218,
  "node_id": "MDU6SXNzdWUzMjk4NDgyMTg=",
  "number": 109,
  "title": "shap.summary_plot for interactions, ValueError: Width and height specified must be non-negative",
  "user": {
    "login": "adima",
    "id": 3246776,
    "node_id": "MDQ6VXNlcjMyNDY3NzY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3246776?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/adima",
    "html_url": "https://github.com/adima",
    "followers_url": "https://api.github.com/users/adima/followers",
    "following_url": "https://api.github.com/users/adima/following{/other_user}",
    "gists_url": "https://api.github.com/users/adima/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/adima/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/adima/subscriptions",
    "organizations_url": "https://api.github.com/users/adima/orgs",
    "repos_url": "https://api.github.com/users/adima/repos",
    "events_url": "https://api.github.com/users/adima/events{/privacy}",
    "received_events_url": "https://api.github.com/users/adima/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-06-06T12:34:54Z",
  "updated_at": "2018-06-06T22:24:07Z",
  "closed_at": "2018-06-06T22:24:07Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello, \r\nI've had this problem on real data, but for the sake of demonstration here's an artificial example:\r\n```\r\nimport numpy as np\r\nimport shap \r\nshap.initjs()\r\n\r\nft = np.array(list(\"abcdefghij\"))\r\nshap.summary_plot(np.random.rand( *(20, 11, 11) ), np.random.rand( *(20, 10) ),\r\n ft, plot_type='violin', max_display=10 )\r\n\r\n```\r\nthis produces error below and the plot of 2 first feature interactions, although I would prefer the interactions of all 10 features. \r\n\r\n> ---------------------------------------------------------------------------\r\n> ValueError                                Traceback (most recent call last)\r\n> <ipython-input-5-5e5b004d0462> in <module>()\r\n>       7 ft = np.array(list(\"abcdefghij\"))\r\n>       8 \r\n> ----> 9 shap.summary_plot(np.random.rand( *(20, 11, 11) ), np.random.rand( *(20, 10) ), ft, plot_type='violin', max_display=5 )\r\n>      10 \r\n> \r\n> ~/anaconda3/lib/python3.6/site-packages/shap/plots.py in summary_plot(shap_values, features, feature_names, max_display, plot_type, color, axis_color, title, alpha, show, sort, color_bar, auto_size_plot, layered_violin_max_num_bins)\r\n>     361         for i in range(1, max_display):\r\n>     362             ind = sort_inds[i]\r\n> --> 363             pl.subplot(1, max_display, i + 1)\r\n>     364             proj_shap_values = shap_values[:, ind, np.hstack((sort_inds, len(sort_inds)))]\r\n>     365             proj_shap_values *= 2\r\n> \r\n> ~/anaconda3/lib/python3.6/site-packages/matplotlib/pyplot.py in subplot(*args, **kwargs)\r\n>    1048 \r\n>    1049     fig = gcf()\r\n> -> 1050     a = fig.add_subplot(*args, **kwargs)\r\n>    1051     bbox = a.bbox\r\n>    1052     byebye = []\r\n> \r\n> ~/anaconda3/lib/python3.6/site-packages/matplotlib/figure.py in add_subplot(self, *args, **kwargs)\r\n>    1072                     self._axstack.remove(ax)\r\n>    1073 \r\n> -> 1074             a = subplot_class_factory(projection_class)(self, *args, **kwargs)\r\n>    1075 \r\n>    1076         self._axstack.add(key, a)\r\n> \r\n> ~/anaconda3/lib/python3.6/site-packages/matplotlib/axes/_subplots.py in __init__(self, fig, *args, **kwargs)\r\n>      71 \r\n>      72         # _axes_class is set in the subplot_class_factory\r\n> ---> 73         self._axes_class.__init__(self, fig, self.figbox, **kwargs)\r\n>      74 \r\n>      75     def __reduce__(self):\r\n> \r\n> ~/anaconda3/lib/python3.6/site-packages/matplotlib/axes/_base.py in __init__(self, fig, rect, facecolor, frameon, sharex, sharey, label, xscale, yscale, axisbg, **kwargs)\r\n>     486             self._position = mtransforms.Bbox.from_bounds(*rect)\r\n>     487         if self._position.width < 0 or self._position.height < 0:\r\n> --> 488             raise ValueError('Width and height specified must be non-negative')\r\n>     489         self._originalPosition = self._position.frozen()\r\n>     490         # self.set_axes(self)\r\n> \r\n> ValueError: Width and height specified must be non-negative",
  "closed_by": {
    "login": "slundberg",
    "id": 3740613,
    "node_id": "MDQ6VXNlcjM3NDA2MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3740613?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/slundberg",
    "html_url": "https://github.com/slundberg",
    "followers_url": "https://api.github.com/users/slundberg/followers",
    "following_url": "https://api.github.com/users/slundberg/following{/other_user}",
    "gists_url": "https://api.github.com/users/slundberg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/slundberg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/slundberg/subscriptions",
    "organizations_url": "https://api.github.com/users/slundberg/orgs",
    "repos_url": "https://api.github.com/users/slundberg/repos",
    "events_url": "https://api.github.com/users/slundberg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/slundberg/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/109/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/109/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
