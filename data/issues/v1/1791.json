{
  "url": "https://api.github.com/repos/shap/shap/issues/1791",
  "repository_url": "https://api.github.com/repos/shap/shap",
  "labels_url": "https://api.github.com/repos/shap/shap/issues/1791/labels{/name}",
  "comments_url": "https://api.github.com/repos/shap/shap/issues/1791/comments",
  "events_url": "https://api.github.com/repos/shap/shap/issues/1791/events",
  "html_url": "https://github.com/shap/shap/issues/1791",
  "id": 796249358,
  "node_id": "MDU6SXNzdWU3OTYyNDkzNTg=",
  "number": 1791,
  "title": "Contradiction between shap and shap_interactions",
  "user": {
    "login": "Vince6691",
    "id": 24211865,
    "node_id": "MDQ6VXNlcjI0MjExODY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/24211865?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Vince6691",
    "html_url": "https://github.com/Vince6691",
    "followers_url": "https://api.github.com/users/Vince6691/followers",
    "following_url": "https://api.github.com/users/Vince6691/following{/other_user}",
    "gists_url": "https://api.github.com/users/Vince6691/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Vince6691/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Vince6691/subscriptions",
    "organizations_url": "https://api.github.com/users/Vince6691/orgs",
    "repos_url": "https://api.github.com/users/Vince6691/repos",
    "events_url": "https://api.github.com/users/Vince6691/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Vince6691/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2021-01-28T18:31:55Z",
  "updated_at": "2021-01-28T18:36:51Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello,\r\n\r\nI have been thinking a long time about one particular use case where I can't figure out the meaning of the figures that are provived by Shap package, which is a great tool anyway.\r\n\r\nI am trying to classify patient between two diseases: Disease A and Disease B, and I have a list of 9 symptoms. It means that all my features are binary features (values are 0 or 1) except symptom 2 which actually corresponds to body temperature and is then continuous\r\n\r\nThe model has a pretty good AUC 0.8, and the shap values obtained with Treeshap method gives this graph\r\n![Capture](https://user-images.githubusercontent.com/24211865/106180645-dc13a700-619c-11eb-85dd-c4a174cdfe56.PNG)\r\n\r\nThen you can see that when symptom1 has the value 0, the impact is positive on my classification, and when symptom3 has the value 1 the impact is also positive. No discussion about this, there is a clear separation between the two clusters on the graph.\r\n\r\nBut when I calculate the **shap interactions** if these 2 features (Symptom1 +Symptom3) here is what I get:\r\n![Capture2](https://user-images.githubusercontent.com/24211865/106182177-c606e600-619e-11eb-8e87-de41d1a61391.PNG)\r\n\r\nThese are the histograms of **the interaction Shapley values** of patients with different combinations of value for the couple Symptom1 + Symptom3. \r\nThe lower right corner graph shows that a combination of Symptom1=0 and Symptom3=1 has a negative impact. But how this is possible ? When you calculate simple shap values, all the points with these features values have both a positive impact. How can the interaction of the 2 same features values have an opposite effect ?\r\nThe impact of this group (Symptom0 & Symptom3=1) is though significant according to the pvalue added on the graph, then it is not a matter of mangitude, I guess.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/shap/shap/issues/1791/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/shap/shap/issues/1791/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
